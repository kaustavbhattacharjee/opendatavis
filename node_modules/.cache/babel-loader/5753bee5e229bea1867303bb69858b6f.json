{"ast":null,"code":"var _jsxFileName = \"/Users/mr.mamun/Desktop/Programs/18 ReactApps/reorderablemat3/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport HeatMap from './HeatMap';\nimport Popup from './Popup';\nimport $ from \"jquery\";\nimport * as algorithms from './algorithms'; //import * as d3 from 'd3'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.view_group3 = () => {\n      var a = this.state.groups.sort(function (a, b) {\n        return b.totalatt - a.totalatt;\n      });\n      this.setState({\n        sorted_groups: a\n      });\n    };\n\n    this.keyhandler = () => {\n      var a = this.state.key;\n      a++;\n      this.setState({\n        key: a\n      });\n    };\n\n    this.index2atrr = indexArray => {\n      var result = [];\n\n      for (var i = 0; i < indexArray.length; i++) {\n        //if(typeof(this.state.unionmade[indexArray[i]])!= \"undefined\"){\n        //console.log(this.state.unionmade[indexArray[i]])\n        result.push(this.state.unionmade[indexArray[i]]); //}\n      } //console.log(algorithms.matrixgen(result,this.state.mydata2))\n\n\n      return result;\n    };\n\n    this.classAdder = (id, class_name) => {\n      var element = document.getElementById(id); //element.style.fill = 'blue';\n\n      element.classList.add(class_name);\n    };\n\n    this.classRemover = (id, class_name) => {\n      var element = document.getElementById(id);\n      element.classList.remove(class_name);\n    };\n\n    this.state = {\n      viewgrouptracker: 2,\n      unionmade: [],\n      arr: [],\n      clickedA: [],\n      groups: [],\n      key: 0,\n      componentDidUpdatecounter: 0,\n      matrixdata: {},\n      sorted_groups: [],\n      myd: {},\n      // data starts here\n      mydata1: {\n        '2005-2010_Graduation_Outcomes_-_School_Level ': ['Student Age', 'DBN', 'CORE COURSE (MS CORE and 9-12 ONLY)', 'SERVICE CATEGORY(K-9* ONLY)', 'NUMBER OF STUDENTS / SEATS FILLED', 'NUMBER OF SECTIONS', 'AVERAGE CLASS SIZE', 'SIZE OF SMALLEST CLASS', 'SIZE OF LARGEST CLASS', 'DATA SOURCE', 'Demographic', 'Cohort', 'Still Enrolled - % of cohort', 'Dropped Out - n', 'Dropped Out - % of cohort'],\n        '2006-2007_School_Progress_Report ': ['DBN', 'DISTRICT', 'PERCENT OF STUDENTS IN BOROUGH / GRADE / PROGRAM / SUBJECT'],\n        '2010-2011_Class_Size_-_School-level_detail ': ['CSD', 'SCHOOLWIDE PUPIL-TEACHER RATIO'],\n        '2011_-_2016_Demographic_Snapshot ': ['DBN', 'Student Age', 'Year', 'Total Enrollment', 'Grade PK', 'Grade K', 'Grade', 'Present', 'Released'],\n        'Local_Law_14_Health_Data_-_HS_School ': ['School DBN', 'Community School District', 'City Council District', 'Student Age', 'SCHOOL CODE', 'NUMBER OF SECTIONS', 'AVERAGE CLASS SIZE', 'SIZE OF SMALLEST CLASS', 'SIZE OF LARGEST CLASS', 'DATA SOURCE', 'GRADE ', 'PROGRAM TYPE', 'CORE SUBJECT (MS CORE and 9-12 ONLY)', 'CORE COURSE (MS CORE and 9-12 ONLY)', 'SERVICE CATEGORY(K-9* ONLY)', 'NUMBER OF STUDENTS / SEATS FILLED', 'NUMBER OF SECTIONS', '# of 15-16 June and August graduates', '# of 15-16 June and August graduates meeting high school health requirements', '%2']\n      },\n      mydata2: {\n        'Health_Education_K-12_-_Health_Instructors ': ['School Name', 'School DBN', 'Community School District', 'City Council District', 'DBN', 'Grade Level', 'Program Type', 'Department', 'Number of Students', 'Number of Classes', '# of students in grades 9-12', 'School Year', '# of teachers assigned to teach health'],\n        '2015_-_2016_Career_Technical_Education_Report ': ['School DBN', 'School Name', 'Is CTE-designated High School', 'CTE Program Name', 'CTE Program Industry Cluster', 'Number of Industry Partners', 'NYSED Approval Status', 'Enrolled Student Grades', 'CTE enrolled Student Count'],\n        'Final_Class_Size_Report_Middle___High_School ': ['School Name', 'Subject', 'Average Class Size'],\n        '2016_-_2017_Health_Education_Report ': ['School DBN', 'Community School District', 'City Council District', 'School Name', '# of students in grades 9-12 scheduled for at least one semester of health instruction', '# of 16-17 June and August graduates', '# of 16-17 June and August graduates meeting high school health requirements'],\n        '2017-2018_Monthly_Attendance ': ['School', 'Month Code', 'CalMonth', 'GradeLevel', 'GradeSort', 'Roster Count', 'Absent', 'Present', 'Released'],\n        'Class_Size_Report_Borough_Middle_And_High_School ': ['Borough', 'Grade Level', 'Program Type', 'Department', 'Class Size', 'Number of Students', 'Number of Classes', '% of Students within Grade'],\n        'ES_Zones_2016-2017 ': ['INITIALS', 'BORO', 'the_geom', 'SCHOOLDIST', 'CREAT_DATE', 'EDIT_DATE', 'BORO_NUM', 'Shape_Leng', 'Shape_Area', 'REMARKS', 'DBN', 'ESID_NO', 'Label', 'ZONED_DIST'],\n        'Local_Law_14_Health_Data_-_HS_School ': ['School DBN', 'Community School District', 'City Council District', 'School Name', '# of students in grades 9-12', '# of students in grades 9-12 who have completed at least one semester of health instruction  ', '%', '# of 15-16 June and August graduates', '# of 15-16 June and August graduates meeting high school health requirements', '%2']\n      }\n    };\n    this.view_group = this.view_group.bind(this);\n    this.view_group2 = this.view_group2.bind(this);\n    this.Unionmaker = this.Unionmaker.bind(this);\n    this.attribute_click_handler = this.attribute_click_handler.bind(this);\n    this.togglePopup = this.togglePopup.bind(this);\n    this.linedraw.bind = this.linedraw; //this.jsonHandler.bind=this.jsonHandler;\n\n    this.jsonHandler = this.jsonHandler.bind(this);\n  }\n\n  //----------------------------------------------------Union Maker\n  Unionmaker(mydata) {\n    var mySet = new Set();\n\n    for (var key in mydata) {\n      for (var i = 0; i < mydata[key].length; i++) {\n        mySet.add(mydata[key][i]);\n      }\n    }\n\n    return Array.from(mySet);\n  } //-----------------------------------------------------ViewGroup click handler starts here\n\n\n  view_group() {\n    this.linedraw();\n    this.keyhandler();\n    var mySet = new Set();\n\n    for (var i = 0; i < this.state.clickedA.length; i++) {\n      mySet.add(this.state.clickedA[i]);\n    }\n\n    var index = Array.from(mySet);\n    var combinations2 = algorithms.combinationgen2(index);\n    var groups_to_vis = []; //----------------------------------------------second grouping starts here\n\n    var grouped_datasets = algorithms.dataset_grouper(this.state.matrixdata.datasets, this.state.matrixdata.matrix, combinations2); //console.log(grouped_datasets)\n    //----------------------------------------------second grouping ends here\n\n    for (var j = 0; j < grouped_datasets.length; j++) {\n      if (grouped_datasets[j][1].length > 0) {\n        var a = React.createElement(HeatMap, {\n          count: j + 1,\n          key: String(this.state.key) + j,\n          gdatasets: grouped_datasets[j][1],\n          combinations: grouped_datasets[j][0],\n          display: \"child\",\n          mypopup: this.togglePopup,\n          clickedA: this.state.clickedA,\n          clickhandler: this.attribute_click_handler,\n          datasets: this.state.matrixdata,\n          commonA: this.state.unionmade,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        });\n        groups_to_vis.push({\n          'item': a,\n          'totalatt': grouped_datasets[j][0].length,\n          'total_datasets': grouped_datasets[j][1].length\n        });\n      }\n\n      this.setState({\n        groups: groups_to_vis\n      });\n    } //console.log(\"view group \",groups_to_vis)\n\n  } //-----------------------------------------------------Group According To datasets click handler starts here\n\n\n  view_group2() {\n    console.log(\"viewGroup2\"); //$(\".mylines\").hide();\n\n    this.linedraw();\n    var a = this.state.groups.sort(function (a, b) {\n      return b.total_datasets - a.total_datasets;\n    });\n    this.setState({\n      sorted_groups: a\n    });\n  }\n\n  //-----------------------------------------------------attribute_click_handler starts here\n  attribute_click_handler(id, index, axis) {\n    //---------------To handle dataset clicks\n    if (axis == 'y') {\n      console.log(id);\n      this.togglePopup();\n    } else {\n      var arr = this.state.clickedA; //---------------To remove attributes from array\n\n      if (this.state.clickedA.includes(index)) {\n        arr = this.state.clickedA.filter(function (e) {\n          return e !== index;\n        });\n        this.classRemover(id, 'textcolor');\n      } else {\n        this.classAdder(id, 'textcolor');\n        arr.push(index);\n      }\n\n      this.setState({\n        clickedA: arr\n      }, () => {\n        // change Here to implement all attributes or selected attributes\n        if (this.state.viewgrouptracker == 2) {\n          this.view_group();\n        } else {\n          this.view_group2();\n        }\n      });\n    }\n  } //----------------------------------------------------- Class Adder\n\n\n  //-----------------------------------------------------ComponentDidmount\n  componentDidMount() {\n    var unionedA = this.Unionmaker(this.state.mydata2);\n    this.setState({\n      unionmade: unionedA\n    });\n    var matrixdata = algorithms.matrixgen(unionedA, this.state.mydata2);\n    this.setState({\n      matrixdata: matrixdata\n    });\n  } //----------------------------------------------------- togglePopup\n\n\n  togglePopup() {\n    this.setState({\n      showPopup: !this.state.showPopup\n    });\n  } //---------------------------------------------------------------ComponentDidUpdate\n\n\n  componentDidUpdate(prevState, prevProp) {\n    this.linedraw();\n    return false;\n  } //---------------------------------------------------------------Line draw function starts here\n\n\n  linedraw() {\n    var selectedonly = true;\n    $(\".\" + \"mylines\").remove(); //$(\".svg0svg01385\").remove(); \n\n    var svgs = $(\".svgRectContainer\");\n    var IdArray = [];\n\n    for (var i = 0; i < svgs.length; i++) {\n      IdArray.push(svgs[i].id);\n    } // ------------------------------------------------------------Outer for loop for lines starts here\n\n\n    for (var i = 0; i < IdArray.length - 1; i++) {\n      console.log(i);\n      var s1length = $(\"#\" + IdArray[i]).find(\".cell\").length; // only useful for else\n\n      var cellcount = 0;\n\n      if (selectedonly) {\n        // ------------------------------------------------------------number of lines to draw is determined here\n        for (var k = 0; k < this.state.clickedA.length; k++) {\n          var j = this.state.clickedA[k] + s1length - this.state.unionmade.length;\n          var s1c1 = $(\"#\" + IdArray[i] + \" #cell\" + j);\n          var s2c1 = $(\"#\" + IdArray[i + 1] + \" #cell\" + cellcount);\n          cellcount++;\n          var myline = IdArray[i] + j;\n          var x1 = $(s1c1).offset().left + $(s1c1).width() / 2;\n          var y1 = $(s1c1).offset().top + $(s1c1).height();\n          var y2 = $(s2c1).offset().top;\n\n          if ($(\".\" + myline).length == 0) {\n            $(\"#mySVG\").clone().addClass(myline).addClass(\"mylines\").insertBefore($(\"#mySVG\").css({\n              left: x1 - 2,\n              top: y1 + 3,\n              width: 1,\n              opacity: .8,\n              height: y2 - y1 - 5,\n              backgroundColor: \"rgb(158,154,200)\"\n            }));\n          }\n        }\n      } //if ends here\n      else {\n          for (var j = s1length - this.state.unionmade.length; j < s1length; j++) {\n            s1c1 = $(\"#\" + IdArray[i] + \" #cell\" + j);\n            s2c1 = $(\"#\" + IdArray[i + 1] + \" #cell\" + cellcount);\n            cellcount++;\n            myline = IdArray[i] + j;\n            var x1 = $(s1c1).offset().left + $(s1c1).width() / 2;\n            var y1 = $(s1c1).offset().top + $(s1c1).height();\n            var y2 = $(s2c1).offset().top;\n\n            if ($(\".\" + myline).length == 0) {\n              $(\"#mySVG\").clone().addClass(myline).addClass(\"mylines\").insertBefore($(\"#mySVG\").css({\n                left: x1 - 2,\n                top: y1 + 3,\n                width: 1,\n                opacity: .5,\n                height: y2 - y1 - 5,\n                backgroundColor: \"rgb(158,154,200)\"\n              }));\n            }\n          }\n        } //else ends here\n\n    }\n  } //------------------------------------------------------------- Json Handler starts Here\n\n\n  jsonHandler() {\n    const self = this;\n    var url = \"http://127.0.0.1:5000/json\";\n    var data = {\n      myrequest: 'data'\n    };\n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(response => {\n      console.log(self.state.mydata2);\n      self.setState({\n        mydata2: response\n      });\n      console.log(self.state.mydata2);\n      return response;\n    }).catch(error => console.error('Error:', error));\n  } //-----------------------------------------------------------------Render function starts here  \n\n\n  render() {\n    if (Object.keys(this.state.matrixdata).length > 0) {}\n\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.view_group2,\n      className: \"btn  btn-outline-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, \"Sort by datasets\"), React.createElement(\"button\", {\n      onClick: this.view_group3,\n      className: \"btn  btn-outline-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, \"Sort by attributes\"), React.createElement(\"button\", {\n      onClick: this.jsonHandler,\n      className: \"btn  btn-outline-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, \"Process data\")), React.createElement(\"div\", {\n      className: \"matrix col-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, Object.keys(this.state.matrixdata).length > 0 ? React.createElement(HeatMap, {\n      key: 'key1',\n      gdatasets: [],\n      display: \"main\",\n      clickhandler: this.attribute_click_handler,\n      datasets: this.state.matrixdata,\n      commonA: this.state.unionmade,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }) : \"NA\", this.state.groups.map((d, i) => {\n      return d.item;\n    }))), // pop up window \n    this.state.showPopup ? React.createElement(Popup, {\n      text: \"Close Me\",\n      closePopup: this.togglePopup.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }) : null, React.createElement(\"div\", {\n      id: \"mySVG\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mr.mamun/Desktop/Programs/18 ReactApps/reorderablemat3/src/App.js"],"names":["React","Component","HeatMap","Popup","$","algorithms","App","constructor","props","view_group3","a","state","groups","sort","b","totalatt","setState","sorted_groups","keyhandler","key","index2atrr","indexArray","result","i","length","push","unionmade","classAdder","id","class_name","element","document","getElementById","classList","add","classRemover","remove","viewgrouptracker","arr","clickedA","componentDidUpdatecounter","matrixdata","myd","mydata1","mydata2","view_group","bind","view_group2","Unionmaker","attribute_click_handler","togglePopup","linedraw","jsonHandler","mydata","mySet","Set","Array","from","index","combinations2","combinationgen2","groups_to_vis","grouped_datasets","dataset_grouper","datasets","matrix","j","String","console","log","total_datasets","axis","includes","filter","e","componentDidMount","unionedA","matrixgen","showPopup","componentDidUpdate","prevState","prevProp","selectedonly","svgs","IdArray","s1length","find","cellcount","k","s1c1","s2c1","myline","x1","offset","left","width","y1","top","height","y2","clone","addClass","insertBefore","css","opacity","backgroundColor","self","url","data","myrequest","fetch","method","body","JSON","stringify","headers","then","res","json","response","catch","error","render","Object","keys","map","d","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport HeatMap from './HeatMap';\nimport Popup from './Popup';\nimport $ from \"jquery\"\nimport * as algorithms from './algorithms';\n//import * as d3 from 'd3'\nclass App extends Component {\n  constructor(props) {\n  super(props);\n  this.state = {\n    viewgrouptracker:2,\n    unionmade:[],\n    arr:[],\n    clickedA:[],\n    groups:[],\n    key:0,\n    componentDidUpdatecounter:0,\n  matrixdata:{},\n  sorted_groups:[],\n  myd:{},\n  // data starts here\n  mydata1:{\n    '2005-2010_Graduation_Outcomes_-_School_Level ': \n    ['Student Age',\n    'DBN',\n    'CORE COURSE (MS CORE and 9-12 ONLY)',\n'SERVICE CATEGORY(K-9* ONLY)',\n'NUMBER OF STUDENTS / SEATS FILLED',\n'NUMBER OF SECTIONS',\n'AVERAGE CLASS SIZE',\n'SIZE OF SMALLEST CLASS',\n'SIZE OF LARGEST CLASS',\n'DATA SOURCE',\n'Demographic',\n'Cohort',\n'Still Enrolled - % of cohort',\n'Dropped Out - n',\n'Dropped Out - % of cohort'],\n'2006-2007_School_Progress_Report ': ['DBN',\n'DISTRICT',\n'PERCENT OF STUDENTS IN BOROUGH / GRADE / PROGRAM / SUBJECT'],\n'2010-2011_Class_Size_-_School-level_detail ': ['CSD',\n'SCHOOLWIDE PUPIL-TEACHER RATIO'],\n'2011_-_2016_Demographic_Snapshot ': ['DBN',\n'Student Age',\n'Year',\n'Total Enrollment',\n'Grade PK',\n'Grade K',\n'Grade',\n'Present',\n'Released'],\n'Local_Law_14_Health_Data_-_HS_School ': ['School DBN',\n'Community School District',\n'City Council District',\n'Student Age',\n'SCHOOL CODE',\n'NUMBER OF SECTIONS',\n'AVERAGE CLASS SIZE',\n'SIZE OF SMALLEST CLASS',\n'SIZE OF LARGEST CLASS',\n'DATA SOURCE',\n'GRADE ',\n'PROGRAM TYPE',\n'CORE SUBJECT (MS CORE and 9-12 ONLY)',\n'CORE COURSE (MS CORE and 9-12 ONLY)',\n'SERVICE CATEGORY(K-9* ONLY)',\n'NUMBER OF STUDENTS / SEATS FILLED',\n'NUMBER OF SECTIONS','# of 15-16 June and August graduates',\n'# of 15-16 June and August graduates meeting high school health requirements',\n'%2']},\nmydata2: {'Health_Education_K-12_-_Health_Instructors ': [\n      'School Name',\n      'School DBN',\n      'Community School District',\n      'City Council District',\n      'DBN',\n      'Grade Level',\n      'Program Type',\n      'Department',\n      'Number of Students',\n      'Number of Classes',\n      '# of students in grades 9-12',\n      'School Year',\n      '# of teachers assigned to teach health'],\n     '2015_-_2016_Career_Technical_Education_Report ': ['School DBN',\n      'School Name',\n      'Is CTE-designated High School',\n      'CTE Program Name',\n      'CTE Program Industry Cluster',\n      'Number of Industry Partners',\n      'NYSED Approval Status',\n      'Enrolled Student Grades',\n      'CTE enrolled Student Count'],\n     'Final_Class_Size_Report_Middle___High_School ': [\n      'School Name',\n      'Subject',\n      'Average Class Size'],\n     '2016_-_2017_Health_Education_Report ': ['School DBN',\n      'Community School District',\n      'City Council District',\n      'School Name',\n      '# of students in grades 9-12 scheduled for at least one semester of health instruction',\n      '# of 16-17 June and August graduates',\n      '# of 16-17 June and August graduates meeting high school health requirements'],\n     '2017-2018_Monthly_Attendance ': ['School',\n      'Month Code',\n      'CalMonth',\n      'GradeLevel',\n      'GradeSort',\n      'Roster Count',\n      'Absent',\n      'Present',\n      'Released'],\n     'Class_Size_Report_Borough_Middle_And_High_School ': ['Borough',\n      'Grade Level',\n      'Program Type',\n      'Department',\n      'Class Size',\n      'Number of Students',\n      'Number of Classes',\n      '% of Students within Grade'],\n     'ES_Zones_2016-2017 ': ['INITIALS',\n      'BORO',\n      'the_geom',\n      'SCHOOLDIST',\n      'CREAT_DATE',\n      'EDIT_DATE',\n      'BORO_NUM',\n      'Shape_Leng',\n      'Shape_Area',\n      'REMARKS',\n      'DBN',\n      'ESID_NO',\n      'Label',\n      'ZONED_DIST'],\n     'Local_Law_14_Health_Data_-_HS_School ': ['School DBN',\n      'Community School District',\n      'City Council District',\n      'School Name',\n      '# of students in grades 9-12',\n      '# of students in grades 9-12 who have completed at least one semester of health instruction  ',\n      '%',\n      '# of 15-16 June and August graduates',\n      '# of 15-16 June and August graduates meeting high school health requirements',\n      '%2']}\n  }\n this.view_group=this.view_group.bind(this);\n this.view_group2=this.view_group2.bind(this);\n this.Unionmaker=this.Unionmaker.bind(this);\n this.attribute_click_handler=this.attribute_click_handler.bind(this);\n this.togglePopup=this.togglePopup.bind(this);\n this.linedraw.bind=this.linedraw;\n //this.jsonHandler.bind=this.jsonHandler;\n this.jsonHandler = this.jsonHandler.bind(this);\n};\n//----------------------------------------------------Union Maker\nUnionmaker(mydata){\n  var mySet= new Set();\n  for(var key in mydata){\n      for(var i=0;i<mydata[key].length;i++){\n          mySet.add(mydata[key][i]);\n      }\n      }\nreturn Array.from(mySet);\n}\n//-----------------------------------------------------ViewGroup click handler starts here\nview_group(){\n  this.linedraw()\n  this.keyhandler();\n  var mySet=new Set();\n  for(var i=0;i<this.state.clickedA.length;i++){\n    mySet.add(this.state.clickedA[i])\n  }\n  var index=Array.from(mySet);\n  var combinations2=algorithms.combinationgen2(index);\n  var groups_to_vis=[];\n//----------------------------------------------second grouping starts here\nvar grouped_datasets=algorithms.dataset_grouper(this.state.matrixdata.datasets,this.state.matrixdata.matrix,combinations2,);\n//console.log(grouped_datasets)\n//----------------------------------------------second grouping ends here\nfor(var j=0;j<grouped_datasets.length;j++){\n  if(grouped_datasets[j][1].length>0){\n  var a=<HeatMap count={j+1} key={String(this.state.key)+j} gdatasets={grouped_datasets[j][1]} combinations={grouped_datasets[j][0]} display='child' mypopup={this.togglePopup} clickedA={this.state.clickedA} clickhandler={this.attribute_click_handler} datasets={this.state.matrixdata} commonA={this.state.unionmade}  />\n  groups_to_vis.push({'item':a,'totalatt':grouped_datasets[j][0].length,'total_datasets':grouped_datasets[j][1].length});\n  }\n  this.setState({groups:groups_to_vis});\n}\n  //console.log(\"view group \",groups_to_vis)\n}\n//-----------------------------------------------------Group According To datasets click handler starts here\nview_group2(){\n  console.log(\"viewGroup2\");\n  //$(\".mylines\").hide();\n  this.linedraw()\n  var a=this.state.groups.sort(function (a, b) {\n    return b.total_datasets - a.total_datasets;\n  });\n  this.setState({sorted_groups:a})\n}\nview_group3=()=>{\n  var a=this.state.groups.sort(function (a, b) {\n    return b.totalatt - a.totalatt;\n  });\n  this.setState({sorted_groups:a})\n}\n//-----------------------------------------------------Key Handler\nkeyhandler=()=>{\n  var a=this.state.key;\n  a++;\n  this.setState({key:a})\n}\n//-----------------------------------------------------IndextoAttribute Generator function\nindex2atrr=(indexArray)=>{\n  var result=[];\n  for(var i=0;i<indexArray.length;i++){\n    //if(typeof(this.state.unionmade[indexArray[i]])!= \"undefined\"){\n      //console.log(this.state.unionmade[indexArray[i]])\n      result.push(this.state.unionmade[indexArray[i]]);\n    //}\n  }\n//console.log(algorithms.matrixgen(result,this.state.mydata2))\nreturn result;\n}\n//-----------------------------------------------------attribute_click_handler starts here\nattribute_click_handler(id,index,axis){\n//---------------To handle dataset clicks\nif(axis=='y'){\n  console.log(id)\n  this.togglePopup();\n}\nelse{\n  var arr=this.state.clickedA;\n//---------------To remove attributes from array\n  if(this.state.clickedA.includes(index)){\n    arr = this.state.clickedA.filter(function(e) { return e !== index })\n    this.classRemover(id,'textcolor');\n  }\n  else{\n    this.classAdder(id,'textcolor')\n    arr.push(index)\n  }\n  this.setState({clickedA:arr},()=>{\n    // change Here to implement all attributes or selected attributes\n    if(this.state.viewgrouptracker==2){\n      this.view_group();\n    }\n    else{\n      this.view_group2();\n    }\n  })\n}\n  }\n//----------------------------------------------------- Class Adder\nclassAdder = (id,class_name)=>{\nvar element = document.getElementById(id);\n//element.style.fill = 'blue';\nelement.classList.add(class_name);\n}\n//----------------------------------------------------- Class Remover\nclassRemover = (id,class_name)=>{\n  var element = document.getElementById(id);\n  element.classList.remove(class_name);\n  }  \n//-----------------------------------------------------ComponentDidmount\ncomponentDidMount(){\n  var unionedA=this.Unionmaker(this.state.mydata2);\n  this.setState({unionmade:unionedA})\n  var matrixdata=algorithms.matrixgen(unionedA,this.state.mydata2);\n  this.setState({matrixdata:matrixdata})\n}\n//----------------------------------------------------- togglePopup\ntogglePopup(){\n  this.setState({\n    showPopup: !this.state.showPopup\n  });\n}\n//---------------------------------------------------------------ComponentDidUpdate\ncomponentDidUpdate(prevState,prevProp){\n  this.linedraw()\n  return false;  \n}\n//---------------------------------------------------------------Line draw function starts here\nlinedraw(){\n  var selectedonly=true;\n  $(\".\"+\"mylines\").remove();\n  //$(\".svg0svg01385\").remove(); \nvar svgs=$(\".svgRectContainer\"); var IdArray=[]; for(var i=0;i<svgs.length;i++){ IdArray.push(svgs[i].id)}\n// ------------------------------------------------------------Outer for loop for lines starts here\n  for(var i=0;i<IdArray.length-1;i++){\n    console.log(i);\n    var s1length=$(\"#\"+IdArray[i]).find( \".cell\" ).length; // only useful for else\n    var cellcount=0;\n    if(selectedonly){\n// ------------------------------------------------------------number of lines to draw is determined here\n  for(var k=0;k<this.state.clickedA.length;k++){\n    var j=this.state.clickedA[k]+s1length-this.state.unionmade.length;\n    var s1c1=$(\"#\"+IdArray[i]+\" #cell\"+j);\n    var s2c1=$(\"#\"+IdArray[i+1]+\" #cell\"+cellcount);\n    cellcount++;\n    var myline=IdArray[i]+j;\n    var x1 = $(s1c1).offset().left + ($(s1c1).width()/2);\n    var y1 = $(s1c1).offset().top + ($(s1c1).height());\n    var y2 = $(s2c1).offset().top;\n    if($(\".\"+myline).length==0){\n      $(\"#mySVG\").clone().addClass(myline).addClass(\"mylines\").insertBefore($(\"#mySVG\").css({left:x1-2,top:y1+3,width:1,opacity:.8,height:y2-y1-5,backgroundColor:\"rgb(158,154,200)\"})); \n    }  \n  }    \n}\n//if ends here\nelse{\n    for(var j=s1length-this.state.unionmade.length;j<s1length;j++){\ns1c1=$(\"#\"+IdArray[i]+\" #cell\"+j);\ns2c1=$(\"#\"+IdArray[i+1]+\" #cell\"+cellcount);\ncellcount++;\nmyline=IdArray[i]+j;\nvar x1 = $(s1c1).offset().left + ($(s1c1).width()/2);\nvar y1 = $(s1c1).offset().top + ($(s1c1).height());\nvar y2 = $(s2c1).offset().top;\nif($(\".\"+myline).length==0){\n  $(\"#mySVG\").clone().addClass(myline).addClass(\"mylines\").insertBefore($(\"#mySVG\").css({left:x1-2,top:y1+3,width:1,opacity:.5,height:y2-y1-5,backgroundColor:\"rgb(158,154,200)\"})); \n}  \n}  \n} \n//else ends here\n}\n  }\n//------------------------------------------------------------- Json Handler starts Here\njsonHandler(){\nconst self=this;\nvar url = \"http://127.0.0.1:5000/json\";\nvar data = {myrequest: 'data'};\nfetch(url, {\n  method: 'POST', \n  body: JSON.stringify(data),\n  headers:{\n    'Content-Type': 'application/json'\n  }\n}).then(res => res.json())\n.then(response => {\n  console.log(self.state.mydata2)\n  self.setState({mydata2:response})\n  console.log(self.state.mydata2)\n  return response;\n}).catch(error => console.error('Error:', error));\n}\n\n\n//-----------------------------------------------------------------Render function starts here  \nrender() {\n  if(Object.keys(this.state.matrixdata).length>0){\n  }\n    return (\n     <div className=\"container-fluid\">\n        <div className=\"row\">\n              <div className=\"col-3\">\n              <button onClick={this.view_group2} className=\"btn  btn-outline-secondary\">Sort by datasets</button>\n              <button onClick={this.view_group3} className=\"btn  btn-outline-secondary\">Sort by attributes</button>\n              <button onClick={this.jsonHandler} className=\"btn  btn-outline-secondary\">Process data</button>\n              </div>\n              <div className=\"matrix col-9\">\n              \n              {\n                  (Object.keys(this.state.matrixdata).length>0)?<HeatMap key={'key1'} gdatasets={[]} display='main' clickhandler={this.attribute_click_handler} datasets={this.state.matrixdata} commonA={this.state.unionmade} />:\"NA\"\n              }\n              { \n                this.state.groups.map( (d,i)=> {\n                  return d.item\n                })  \n              }\n              </div>\n        </div>      \n      { // pop up window \n        this.state.showPopup ? \n          <Popup\n            text='Close Me'\n            closePopup={this.togglePopup.bind(this)}\n          />\n          : null\n      }\n      <div id=\"mySVG\">\n      </div>\n    </div>\n    );\n  }\n}\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}