{"ast":null,"code":"var _jsxFileName = \"/Users/kaustav/Work-Projects/reorderable_matrix/src/HeatMap.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport * as d3 from 'd3';\n\nclass HeatMap extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      svgcount: 0,\n      width: 0,\n      height: 0,\n      test: 1,\n      dataset_length: 5,\n      attribute_length: 0\n    };\n    this.createHeatMap = this.createHeatMap.bind(this);\n    this.prep = this.prep.bind(this);\n    this.prep2 = this.prep2.bind(this);\n  }\n\n  componentWillMount() {\n    var multiplier = 18; // multiplier defines the cell size\n\n    if (this.props.display == 'main') {\n      this.setState({\n        width: this.props.commonA.length * multiplier + 420\n      });\n      this.setState({\n        attribute_length: this.props.commonA.length\n      });\n      this.setState({\n        height: this.props.datasets.datasets.length * multiplier + 120\n      });\n      this.setState({\n        dataset_length: this.props.datasets.datasets.length\n      });\n    } else if (this.props.count == 1) {\n      this.setState({\n        width: this.props.commonA.length * multiplier + 420\n      });\n      this.setState({\n        attribute_length: this.props.commonA.length\n      });\n      this.setState({\n        height: this.props.gdatasets.length * multiplier + 120\n      });\n      this.setState({\n        dataset_length: this.props.gdatasets.length\n      });\n    } else if (this.props.display == 'child' && this.props.count != 1) {\n      this.setState({\n        width: this.props.commonA.length * multiplier + 420\n      });\n      this.setState({\n        attribute_length: this.props.commonA.length\n      });\n      this.setState({\n        height: this.props.gdatasets.length * multiplier + 10\n      });\n      this.setState({\n        dataset_length: this.props.gdatasets.length\n      });\n    } else {\n      this.setState({\n        width: this.props.clickedA.length * multiplier + 350\n      });\n      this.setState({\n        height: this.props.gdatasets.length * multiplier + 120\n      });\n      this.setState({\n        dataset_length: this.props.gdatasets.length\n      });\n      this.setState({\n        attribute_length: this.props.clickedA.length - 1\n      });\n    }\n  } //--------------------------------Prepare for HeatMap here\n\n\n  prep(mydata, commonA) {\n    var arr = [];\n\n    for (var i = 0; i < mydata.datasets.length; i++) {\n      for (var j = 0; j < commonA.length; j++) {\n        var arr2 = [];\n        arr2.push(mydata.datasets[i]);\n        arr2.push(commonA[j]);\n        arr2.push(mydata.matrix[i][j]); //console.log(mydata.datasets[i],mydata.matrix[i][j],commonA[j]);\n\n        arr.push(arr2);\n      }\n    }\n\n    return arr;\n  }\n\n  prep2(mydata, commonA, gdatasets) {\n    var arr = [];\n\n    for (var i = 0; i < mydata.datasets.length; i++) {\n      for (var ai = 0; ai < gdatasets.length; ai++) {\n        if (mydata.datasets[i] == gdatasets[ai]) {\n          for (var j = 0; j < commonA.length; j++) {\n            var arr2 = [];\n            arr2.push(mydata.datasets[i]);\n            arr2.push(commonA[j]);\n            arr2.push(mydata.matrix[i][j]); //console.log(mydata.datasets[i],mydata.matrix[i][j],commonA[j]);\n\n            arr.push(arr2);\n          }\n        }\n      }\n    } //console.log('prep2',arr)\n\n\n    return arr;\n  } //------------CreateHeatMap starts here\n\n\n  createHeatMap() {\n    const node = this.node;\n\n    if (this.props.display == 'main' || this.props.count == 1) {\n      var margin = {\n        top: 100,\n        right: 40,\n        bottom: 20,\n        left: 480\n      };\n    } else {\n      var margin = {\n        top: 5,\n        right: 40,\n        bottom: 5,\n        left: 480\n      };\n    }\n\n    var width = this.state.width - margin.right - margin.left,\n        height = this.state.height - margin.top - margin.bottom;\n\n    if (this.props.display == 'main') {\n      var data = this.prep(this.props.datasets, this.props.commonA);\n    } //-------only combinationed attributes\n    else if (this.props.display == 'minimum') {\n        var data = this.prep2(this.props.datasets, this.props.clickedA, this.props.gdatasets);\n      } else {\n        var data = this.prep2(this.props.datasets, this.props.commonA, this.props.gdatasets);\n      } //console.log(data);\n\n\n    var x_elements = d3.set(data.map(function (d) {\n      return d[1];\n    })).values(); //console.log(x_elements);\n\n    var y_elements = d3.set(data.map(function (d) {\n      return d[0];\n    })).values(); // Ordinal Scaling for X axis\n\n    var xScale = d3.scale.ordinal().domain(x_elements).rangeBands([0, width]);\n    var xAxis = d3.svg.axis().scale(xScale).tickFormat(function (d) {\n      return d;\n    }).orient(\"top\"); // console.log(width)\n    //Ordinal Scaling for Y axis\n\n    var yScale = d3.scale.ordinal().domain(y_elements).rangeBands([0, height]);\n    var yAxis = d3.svg.axis().scale(yScale).tickFormat(function (d) {\n      return d;\n    }).orient(\"left\"); //--------- d3 Select starts here\n\n    var svg = d3.select(node).attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    svg.selectAll('rect').data(data).enter().append('rect');\n    d3.select(node).selectAll('rect').data(data).exit().remove(); //-------------------------------------------------------------------------------------- Main view starts here\n\n    if (this.props.display == 'main') {\n      d3.select(node).selectAll('rect').data(data).attr('class', 'cell').attr('id', (d, i) => \"cell\" + i).attr('width', width / this.state.attribute_length - 1).attr('height', height / this.state.dataset_length - 1).attr('y', function (d) {\n        return yScale(d[0]);\n      }).attr('x', function (d) {\n        return xScale(d[1]);\n      }).attr('fill', d => d[2] !== 'n' ? 'rgb(158,154,200)' : \"rgb(247,247, 247)\"); //--x axis\n\n      svg.append(\"g\").attr(\"class\", \"x axis\").call(xAxis).selectAll('text').attr(\"id\", (d, i) => 'text' + i).style(\"text-anchor\", \"start\").attr('fill', (d, i) => {\n        if (this.props.clickedA) {\n          if (this.props.clickedA.includes(i)) {\n            return 'red';\n          }\n        }\n      }).attr(\"dx\", \"1em\").attr(\"dy\", \".6em\").on('click', (d, i) => {\n        // assign function only for main matrix\n        if (this.props.display == 'main') {\n          this.props.clickhandler('text' + i, i, 'x');\n        } // else can be applied for\n\n      }).attr(\"transform\", function (d) {\n        return \"rotate(-45)\";\n      }); //------------------------------------------------------- Y Axis\n\n      svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis).selectAll('text').on('click', (d, i) => {\n        this.props.clickhandler(this.props.gdatasets, i, 'popup2');\n      }).attr('font-weight', 'normal'); //------------------------------------------------------- Border starts here\n\n      var colors = d3.scale.linear().domain([0, 1, 2, 3, 4]).range([\"#9321ff\", \"yellow\", \"#93215f\", \"red\", \"#31c514\"]);\n      var x = Math.floor(Math.random() * 4 + 1);\n      svg.append(\"rect\").attr(\"x\", 0).attr(\"y\", 0).attr(\"height\", height).attr(\"width\", width).style(\"stroke\", function (d, i) {\n        return colors(x);\n      }).style(\"fill\", \"none\").style(\"stroke-width\", 3);\n    } //Main view ends here\n    //-------------------------------------------------------------------------------------- childview starts here\n\n\n    if (this.props.display == 'child') {\n      d3.select(\"#svg0\").remove();\n      d3.select(node).selectAll('rect').data(data).attr('class', 'cell').attr('id', (d, i) => \"cell\" + i).attr('width', width / this.state.attribute_length - 1).attr('height', height / this.state.dataset_length - 1).attr('y', function (d) {\n        return yScale(d[0]);\n      }).attr('x', function (d) {\n        return xScale(d[1]);\n      }).attr('fill', d => d[2] !== 'n' ? 'rgb(158,154,200)' : \"rgb(247,247, 247)\"); //--x axis\n\n      if (this.props.count == 1) {\n        svg.append(\"g\").attr(\"class\", \"x axis\").call(xAxis).selectAll('text').attr(\"id\", (d, i) => 'text' + i).style(\"text-anchor\", \"start\").attr('fill', (d, i) => {\n          if (this.props.clickedA) {\n            if (this.props.clickedA.includes(i)) {\n              return 'red';\n            }\n          }\n        }).attr(\"dx\", \"1em\").attr(\"dy\", \".6em\").on('click', (d, i) => {\n          // assign function only for main matrix\n          if (this.props.count == 1) {\n            this.props.clickhandler('text' + i, i, 'x');\n          } // else can be applied for\n\n        }).attr(\"transform\", function (d) {\n          return \"rotate(-45)\";\n        });\n      } //----------Y Axis\n\n\n      svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis).selectAll('text').on('click', (d, i) => {\n        this.props.clickhandler(this.props.gdatasets, i, 'popup2');\n      }).attr('font-weight', 'normal'); //------Border starts here\n\n      var colors = d3.scale.linear().domain([0, 1, 2, 3, 4]).range([\"#9321ff\", \"yellow\", \"#93215f\", \"red\", \"#31c514\"]);\n      var x = Math.floor(Math.random() * 4 + 1);\n      svg.append(\"rect\").attr(\"x\", 0).attr(\"y\", 0).attr(\"height\", height).attr(\"width\", width).style(\"stroke\", function (d, i) {\n        return colors(x);\n      }).style(\"fill\", \"none\").style(\"stroke-width\", 3);\n    } //Child view ends here\n\n  } //CreateMap ends here\n\n\n  componentDidMount() {\n    this.createHeatMap();\n  }\n\n  componentDidUpdate() {\n    this.createHeatMap();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.display == 'main') {\n      return false;\n    } else if (this.props.commonA === nextProps.commonA) {\n      return false;\n    } else if (this.props.display == \"child\") {\n      return false;\n    } else {\n      console.log(' else ');\n      return true;\n    }\n  }\n\n  render() {\n    console.log(this.props.count);\n    return React.createElement(\"svg\", {\n      className: \"svgRectContainer\",\n      id: this.props.display == \"main\" ? \"svg0\" : \"svg\" + this.props.count,\n      ref: node => this.node = node,\n      width: this.state.width,\n      height: this.state.height,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default HeatMap;","map":{"version":3,"sources":["/Users/kaustav/Work-Projects/reorderable_matrix/src/HeatMap.js"],"names":["React","Component","d3","HeatMap","constructor","props","state","svgcount","width","height","test","dataset_length","attribute_length","createHeatMap","bind","prep","prep2","componentWillMount","multiplier","display","setState","commonA","length","datasets","count","gdatasets","clickedA","mydata","arr","i","j","arr2","push","matrix","ai","node","margin","top","right","bottom","left","data","x_elements","set","map","d","values","y_elements","xScale","scale","ordinal","domain","rangeBands","xAxis","svg","axis","tickFormat","orient","yScale","yAxis","select","attr","append","selectAll","enter","exit","remove","call","style","includes","on","clickhandler","colors","linear","range","x","Math","floor","random","componentDidMount","componentDidUpdate","shouldComponentUpdate","nextProps","nextState","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;;AACA,MAAMC,OAAN,SAAsBF,SAAtB,CAAgC;AAC7BG,EAAAA,WAAW,CAACC,KAAD,EAAO;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACTC,MAAAA,QAAQ,EAAC,CADA;AAETC,MAAAA,KAAK,EAAC,CAFG;AAGTC,MAAAA,MAAM,EAAC,CAHE;AAITC,MAAAA,IAAI,EAAC,CAJI;AAIDC,MAAAA,cAAc,EAAC,CAJd;AAIgBC,MAAAA,gBAAgB,EAAC;AAJjC,KAAX;AAMA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUD,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKE,KAAL,GAAa,KAAKA,KAAL,CAAWF,IAAX,CAAgB,IAAhB,CAAb;AACF;;AACDG,EAAAA,kBAAkB,GAAE;AACnB,QAAIC,UAAU,GAAC,EAAf,CADmB,CACA;;AACnB,QAAG,KAAKb,KAAL,CAAWc,OAAX,IAAoB,MAAvB,EAA8B;AAC5B,WAAKC,QAAL,CAAc;AAACZ,QAAAA,KAAK,EAAC,KAAKH,KAAL,CAAWgB,OAAX,CAAmBC,MAAnB,GAA0BJ,UAA1B,GAAuC;AAA9C,OAAd;AACA,WAAKE,QAAL,CAAc;AAACR,QAAAA,gBAAgB,EAAE,KAAKP,KAAL,CAAWgB,OAAX,CAAmBC;AAAtC,OAAd;AACA,WAAKF,QAAL,CAAc;AAACX,QAAAA,MAAM,EAAC,KAAKJ,KAAL,CAAWkB,QAAX,CAAoBA,QAApB,CAA6BD,MAA7B,GAAoCJ,UAApC,GAAiD;AAAzD,OAAd;AACA,WAAKE,QAAL,CAAc;AAACT,QAAAA,cAAc,EAAE,KAAKN,KAAL,CAAWkB,QAAX,CAAoBA,QAApB,CAA6BD;AAA9C,OAAd;AACD,KALD,MAMK,IAAG,KAAKjB,KAAL,CAAWmB,KAAX,IAAkB,CAArB,EAAuB;AAC1B,WAAKJ,QAAL,CAAc;AAACZ,QAAAA,KAAK,EAAC,KAAKH,KAAL,CAAWgB,OAAX,CAAmBC,MAAnB,GAA0BJ,UAA1B,GAAuC;AAA9C,OAAd;AACA,WAAKE,QAAL,CAAc;AAACR,QAAAA,gBAAgB,EAAE,KAAKP,KAAL,CAAWgB,OAAX,CAAmBC;AAAtC,OAAd;AACA,WAAKF,QAAL,CAAc;AAACX,QAAAA,MAAM,EAAC,KAAKJ,KAAL,CAAWoB,SAAX,CAAqBH,MAArB,GAA4BJ,UAA5B,GAAyC;AAAjD,OAAd;AACA,WAAKE,QAAL,CAAc;AAACT,QAAAA,cAAc,EAAE,KAAKN,KAAL,CAAWoB,SAAX,CAAqBH;AAAtC,OAAd;AACD,KALI,MAMA,IAAG,KAAKjB,KAAL,CAAWc,OAAX,IAAoB,OAApB,IAA+B,KAAKd,KAAL,CAAWmB,KAAX,IAAkB,CAApD,EAAsD;AACzD,WAAKJ,QAAL,CAAc;AAACZ,QAAAA,KAAK,EAAC,KAAKH,KAAL,CAAWgB,OAAX,CAAmBC,MAAnB,GAA0BJ,UAA1B,GAAuC;AAA9C,OAAd;AACA,WAAKE,QAAL,CAAc;AAACR,QAAAA,gBAAgB,EAAE,KAAKP,KAAL,CAAWgB,OAAX,CAAmBC;AAAtC,OAAd;AACA,WAAKF,QAAL,CAAc;AAACX,QAAAA,MAAM,EAAC,KAAKJ,KAAL,CAAWoB,SAAX,CAAqBH,MAArB,GAA4BJ,UAA5B,GAAyC;AAAjD,OAAd;AACA,WAAKE,QAAL,CAAc;AAACT,QAAAA,cAAc,EAAE,KAAKN,KAAL,CAAWoB,SAAX,CAAqBH;AAAtC,OAAd;AACD,KALI,MAMD;AACF,WAAKF,QAAL,CAAc;AAACZ,QAAAA,KAAK,EAAC,KAAKH,KAAL,CAAWqB,QAAX,CAAoBJ,MAApB,GAA2BJ,UAA3B,GAAwC;AAA/C,OAAd;AACA,WAAKE,QAAL,CAAc;AAACX,QAAAA,MAAM,EAAC,KAAKJ,KAAL,CAAWoB,SAAX,CAAqBH,MAArB,GAA4BJ,UAA5B,GAAyC;AAAjD,OAAd;AACA,WAAKE,QAAL,CAAc;AAACT,QAAAA,cAAc,EAAE,KAAKN,KAAL,CAAWoB,SAAX,CAAqBH;AAAtC,OAAd;AACA,WAAKF,QAAL,CAAc;AAACR,QAAAA,gBAAgB,EAAE,KAAKP,KAAL,CAAWqB,QAAX,CAAoBJ,MAApB,GAA2B;AAA9C,OAAd;AACD;AAEF,GAxC6B,CAyC9B;;;AACCP,EAAAA,IAAI,CAACY,MAAD,EAAQN,OAAR,EAAgB;AACnB,QAAIO,GAAG,GAAC,EAAR;;AACA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACF,MAAM,CAACJ,QAAP,CAAgBD,MAA/B,EAAsCO,CAAC,EAAvC,EAA0C;AACtC,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACT,OAAO,CAACC,MAAtB,EAA6BQ,CAAC,EAA9B,EAAiC;AAC7B,YAAIC,IAAI,GAAC,EAAT;AACAA,QAAAA,IAAI,CAACC,IAAL,CAAUL,MAAM,CAACJ,QAAP,CAAgBM,CAAhB,CAAV;AACAE,QAAAA,IAAI,CAACC,IAAL,CAAUX,OAAO,CAACS,CAAD,CAAjB;AACAC,QAAAA,IAAI,CAACC,IAAL,CAAUL,MAAM,CAACM,MAAP,CAAcJ,CAAd,EAAiBC,CAAjB,CAAV,EAJ6B,CAK7B;;AACAF,QAAAA,GAAG,CAACI,IAAJ,CAASD,IAAT;AACH;AAEJ;;AACD,WAAOH,GAAP;AACH;;AACDZ,EAAAA,KAAK,CAACW,MAAD,EAAQN,OAAR,EAAgBI,SAAhB,EAA0B;AAC7B,QAAIG,GAAG,GAAC,EAAR;;AACA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACF,MAAM,CAACJ,QAAP,CAAgBD,MAA/B,EAAsCO,CAAC,EAAvC,EAA0C;AACtC,WAAI,IAAIK,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACT,SAAS,CAACH,MAA1B,EAAiCY,EAAE,EAAnC,EAAsC;AAClC,YAAGP,MAAM,CAACJ,QAAP,CAAgBM,CAAhB,KAAoBJ,SAAS,CAACS,EAAD,CAAhC,EAAqC;AACjC,eAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACT,OAAO,CAACC,MAAtB,EAA6BQ,CAAC,EAA9B,EAAiC;AAC7B,gBAAIC,IAAI,GAAC,EAAT;AACAA,YAAAA,IAAI,CAACC,IAAL,CAAUL,MAAM,CAACJ,QAAP,CAAgBM,CAAhB,CAAV;AACAE,YAAAA,IAAI,CAACC,IAAL,CAAUX,OAAO,CAACS,CAAD,CAAjB;AACAC,YAAAA,IAAI,CAACC,IAAL,CAAUL,MAAM,CAACM,MAAP,CAAcJ,CAAd,EAAiBC,CAAjB,CAAV,EAJ6B,CAK7B;;AACAF,YAAAA,GAAG,CAACI,IAAJ,CAASD,IAAT;AACH;AACJ;AACJ;AACJ,KAf4B,CAgB7B;;;AACA,WAAOH,GAAP;AACD,GA3E+B,CA4E7B;;;AACAf,EAAAA,aAAa,GAAG;AACf,UAAMsB,IAAI,GAAG,KAAKA,IAAlB;;AACA,QAAG,KAAK9B,KAAL,CAAWc,OAAX,IAAoB,MAApB,IAA8B,KAAKd,KAAL,CAAWmB,KAAX,IAAkB,CAAnD,EAAqD;AACnD,UAAIY,MAAM,GAAG;AAACC,QAAAA,GAAG,EAAE,GAAN;AAAWC,QAAAA,KAAK,EAAE,EAAlB;AAAsBC,QAAAA,MAAM,EAAE,EAA9B;AAAkCC,QAAAA,IAAI,EAAE;AAAxC,OAAb;AACD,KAFD,MAGI;AACF,UAAIJ,MAAM,GAAG;AAACC,QAAAA,GAAG,EAAE,CAAN;AAASC,QAAAA,KAAK,EAAE,EAAhB;AAAoBC,QAAAA,MAAM,EAAE,CAA5B;AAA+BC,QAAAA,IAAI,EAAE;AAArC,OAAb;AACD;;AACD,QAAIhC,KAAK,GAAG,KAAKF,KAAL,CAAWE,KAAX,GAAmB4B,MAAM,CAACE,KAA1B,GAAkCF,MAAM,CAACI,IAArD;AAAA,QACA/B,MAAM,GAAG,KAAKH,KAAL,CAAWG,MAAX,GAAoB2B,MAAM,CAACC,GAA3B,GAAiCD,MAAM,CAACG,MADjD;;AAEA,QAAG,KAAKlC,KAAL,CAAWc,OAAX,IAAoB,MAAvB,EAA8B;AAC5B,UAAIsB,IAAI,GAAC,KAAK1B,IAAL,CAAU,KAAKV,KAAL,CAAWkB,QAArB,EAA8B,KAAKlB,KAAL,CAAWgB,OAAzC,CAAT;AACD,KAFD,CAGA;AAHA,SAIK,IAAG,KAAKhB,KAAL,CAAWc,OAAX,IAAoB,SAAvB,EAAiC;AACpC,YAAIsB,IAAI,GAAC,KAAKzB,KAAL,CAAW,KAAKX,KAAL,CAAWkB,QAAtB,EAA+B,KAAKlB,KAAL,CAAWqB,QAA1C,EAAmD,KAAKrB,KAAL,CAAWoB,SAA9D,CAAT;AACD,OAFI,MAGD;AACF,YAAIgB,IAAI,GAAC,KAAKzB,KAAL,CAAW,KAAKX,KAAL,CAAWkB,QAAtB,EAA+B,KAAKlB,KAAL,CAAWgB,OAA1C,EAAkD,KAAKhB,KAAL,CAAWoB,SAA7D,CAAT;AACD,OAnBc,CAoBf;;;AACA,QAAIiB,UAAU,GAAGxC,EAAE,CAACyC,GAAH,CAAOF,IAAI,CAACG,GAAL,CAAS,UAAUC,CAAV,EAAc;AAAE,aAAOA,CAAC,CAAC,CAAD,CAAR;AAAc,KAAvC,CAAP,EAAkDC,MAAlD,EAAjB,CArBe,CAsBf;;AACA,QAAIC,UAAU,GAAG7C,EAAE,CAACyC,GAAH,CAAOF,IAAI,CAACG,GAAL,CAAS,UAAUC,CAAV,EAAc;AAAE,aAAOA,CAAC,CAAC,CAAD,CAAR;AAAc,KAAvC,CAAP,EAAkDC,MAAlD,EAAjB,CAvBe,CAyBnB;;AACI,QAAIE,MAAM,GAAG9C,EAAE,CAAC+C,KAAH,CAASC,OAAT,GACVC,MADU,CACHT,UADG,EAEVU,UAFU,CAEC,CAAC,CAAD,EAAI5C,KAAJ,CAFD,CAAb;AAGA,QAAI6C,KAAK,GAAGnD,EAAE,CAACoD,GAAH,CAAOC,IAAP,GACTN,KADS,CACHD,MADG,EAETQ,UAFS,CAEE,UAAUX,CAAV,EAAa;AACrB,aAAOA,CAAP;AACH,KAJS,EAKTY,MALS,CAKF,KALE,CAAZ,CA7Be,CAmCd;AACL;;AACI,QAAIC,MAAM,GAAGxD,EAAE,CAAC+C,KAAH,CAASC,OAAT,GACVC,MADU,CACHJ,UADG,EAEVK,UAFU,CAEC,CAAC,CAAD,EAAI3C,MAAJ,CAFD,CAAb;AAGA,QAAIkD,KAAK,GAAGzD,EAAE,CAACoD,GAAH,CAAOC,IAAP,GACTN,KADS,CACHS,MADG,EAETF,UAFS,CAEE,UAAUX,CAAV,EAAa;AACrB,aAAOA,CAAP;AACH,KAJS,EAKTY,MALS,CAKF,MALE,CAAZ,CAxCe,CA8CnB;;AACI,QAAIH,GAAG,GAAGpD,EAAE,CAAC0D,MAAH,CAAUzB,IAAV,EACP0B,IADO,CACF,OADE,EACOrD,KAAK,GAAG4B,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KADpC,EAEPuB,IAFO,CAEF,QAFE,EAEQpD,MAAM,GAAG2B,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAFrC,EAGPuB,MAHO,CAGA,GAHA,EAIPD,IAJO,CAIF,WAJE,EAIW,eAAezB,MAAM,CAACI,IAAtB,GAA6B,GAA7B,GAAmCJ,MAAM,CAACC,GAA1C,GAAgD,GAJ3D,CAAV;AAKEiB,IAAAA,GAAG,CAACS,SAAJ,CAAc,MAAd,EACCtB,IADD,CACMA,IADN,EAECuB,KAFD,GAESF,MAFT,CAEgB,MAFhB;AAGA5D,IAAAA,EAAE,CAAC0D,MAAH,CAAUzB,IAAV,EACC4B,SADD,CACW,MADX,EAECtB,IAFD,CAEMA,IAFN,EAGCwB,IAHD,GAICC,MAJD,GAvDa,CA4DnB;;AACA,QAAG,KAAK7D,KAAL,CAAWc,OAAX,IAAoB,MAAvB,EAA8B;AACpBjB,MAAAA,EAAE,CAAC0D,MAAH,CAAUzB,IAAV,EACC4B,SADD,CACW,MADX,EAECtB,IAFD,CAEMA,IAFN,EAGCoB,IAHD,CAGM,OAHN,EAGe,MAHf,EAICA,IAJD,CAIM,IAJN,EAIW,CAAChB,CAAD,EAAGhB,CAAH,KAAO,SAAOA,CAJzB,EAKCgC,IALD,CAKM,OALN,EAKerD,KAAK,GAAE,KAAKF,KAAL,CAAWM,gBAAlB,GAAoC,CALnD,EAMCiD,IAND,CAMM,QANN,EAMgBpD,MAAM,GAAE,KAAKH,KAAL,CAAWK,cAAnB,GAAmC,CANnD,EAOCkD,IAPD,CAOM,GAPN,EAOW,UAAShB,CAAT,EAAY;AAAE,eAAOa,MAAM,CAACb,CAAC,CAAC,CAAD,CAAF,CAAb;AAAsB,OAP/C,EAQCgB,IARD,CAQM,GARN,EAQW,UAAShB,CAAT,EAAY;AAAE,eAAOG,MAAM,CAACH,CAAC,CAAC,CAAD,CAAF,CAAb;AAAsB,OAR/C,EASCgB,IATD,CASM,MATN,EASehB,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,KAAO,GAAP,GAAY,kBAAZ,GAA+B,mBATnD,EADoB,CAW9B;;AACAS,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EACCD,IADD,CACM,OADN,EACe,QADf,EAECM,IAFD,CAEMd,KAFN,EAGCU,SAHD,CAGW,MAHX,EAICF,IAJD,CAIM,IAJN,EAIW,CAAChB,CAAD,EAAGhB,CAAH,KAAQ,SAAOA,CAJ1B,EAKCuC,KALD,CAKO,aALP,EAKsB,OALtB,EAMCP,IAND,CAMM,MANN,EAMa,CAAChB,CAAD,EAAGhB,CAAH,KAAO;AAClB,YAAG,KAAKxB,KAAL,CAAWqB,QAAd,EAAuB;AACrB,cAAG,KAAKrB,KAAL,CAAWqB,QAAX,CAAoB2C,QAApB,CAA6BxC,CAA7B,CAAH,EAAmC;AACjC,mBAAO,KAAP;AACD;AACF;AAEF,OAbD,EAcCgC,IAdD,CAcM,IAdN,EAcY,KAdZ,EAeCA,IAfD,CAeM,IAfN,EAeY,MAfZ,EAgBCS,EAhBD,CAgBI,OAhBJ,EAgBY,CAACzB,CAAD,EAAGhB,CAAH,KAAQ;AAClB;AACA,YAAG,KAAKxB,KAAL,CAAWc,OAAX,IAAoB,MAAvB,EAA8B;AAC5B,eAAKd,KAAL,CAAWkE,YAAX,CAAwB,SAAO1C,CAA/B,EAAiCA,CAAjC,EAAmC,GAAnC;AACD,SAJiB,CAKlB;;AACD,OAtBD,EAuBCgC,IAvBD,CAuBM,WAvBN,EAuBmB,UAAUhB,CAAV,EAAa;AAC5B,eAAO,aAAP;AACH,OAzBD,EAZ8B,CAsC9B;;AACAS,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EACOD,IADP,CACY,OADZ,EACqB,QADrB,EAEOM,IAFP,CAEYR,KAFZ,EAGOI,SAHP,CAGiB,MAHjB,EAIOO,EAJP,CAIU,OAJV,EAIkB,CAACzB,CAAD,EAAGhB,CAAH,KAAO;AACjB,aAAKxB,KAAL,CAAWkE,YAAX,CAAwB,KAAKlE,KAAL,CAAWoB,SAAnC,EAA6CI,CAA7C,EAA+C,QAA/C;AACD,OANP,EAOOgC,IAPP,CAOY,aAPZ,EAO2B,QAP3B,EAvC8B,CA+C9B;;AACA,UAAIW,MAAM,GAAGtE,EAAE,CAAC+C,KAAH,CAASwB,MAAT,GACZtB,MADY,CACL,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,CADK,EAEZuB,KAFY,CAEN,CAAC,SAAD,EAAW,QAAX,EAAoB,SAApB,EAA8B,KAA9B,EAAoC,SAApC,CAFM,CAAb;AAGA,UAAIC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,KAAgB,CAAjB,GAAsB,CAAjC,CAAR;AACAxB,MAAAA,GAAG,CAACQ,MAAJ,CAAW,MAAX,EACOD,IADP,CACY,GADZ,EACiB,CADjB,EAEOA,IAFP,CAEY,GAFZ,EAEiB,CAFjB,EAGOA,IAHP,CAGY,QAHZ,EAGsBpD,MAHtB,EAIOoD,IAJP,CAIY,OAJZ,EAIqBrD,KAJrB,EAKO4D,KALP,CAKa,QALb,EAKsB,UAAUvB,CAAV,EAAYhB,CAAZ,EAAe;AAC7B,eAAO2C,MAAM,CAACG,CAAD,CAAb;AACH,OAPL,EAQOP,KARP,CAQa,MARb,EAQqB,MARrB,EASOA,KATP,CASa,cATb,EAS6B,CAT7B;AAUC,KA3HkB,CA4HnB;AACA;;;AACA,QAAG,KAAK/D,KAAL,CAAWc,OAAX,IAAoB,OAAvB,EAA+B;AAC7BjB,MAAAA,EAAE,CAAC0D,MAAH,CAAU,OAAV,EAAmBM,MAAnB;AACAhE,MAAAA,EAAE,CAAC0D,MAAH,CAAUzB,IAAV,EACC4B,SADD,CACW,MADX,EAECtB,IAFD,CAEMA,IAFN,EAGCoB,IAHD,CAGM,OAHN,EAGe,MAHf,EAICA,IAJD,CAIM,IAJN,EAIW,CAAChB,CAAD,EAAGhB,CAAH,KAAO,SAAOA,CAJzB,EAKCgC,IALD,CAKM,OALN,EAKerD,KAAK,GAAE,KAAKF,KAAL,CAAWM,gBAAlB,GAAoC,CALnD,EAMCiD,IAND,CAMM,QANN,EAMgBpD,MAAM,GAAE,KAAKH,KAAL,CAAWK,cAAnB,GAAmC,CANnD,EAOCkD,IAPD,CAOM,GAPN,EAOW,UAAShB,CAAT,EAAY;AAAE,eAAOa,MAAM,CAACb,CAAC,CAAC,CAAD,CAAF,CAAb;AAAsB,OAP/C,EAQCgB,IARD,CAQM,GARN,EAQW,UAAShB,CAAT,EAAY;AAAE,eAAOG,MAAM,CAACH,CAAC,CAAC,CAAD,CAAF,CAAb;AAAsB,OAR/C,EASCgB,IATD,CASM,MATN,EASehB,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,KAAO,GAAP,GAAY,kBAAZ,GAA+B,mBATnD,EAF6B,CAY/B;;AACA,UAAG,KAAKxC,KAAL,CAAWmB,KAAX,IAAkB,CAArB,EAAuB;AACrB8B,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EACCD,IADD,CACM,OADN,EACe,QADf,EAECM,IAFD,CAEMd,KAFN,EAGCU,SAHD,CAGW,MAHX,EAICF,IAJD,CAIM,IAJN,EAIW,CAAChB,CAAD,EAAGhB,CAAH,KAAQ,SAAOA,CAJ1B,EAKCuC,KALD,CAKO,aALP,EAKsB,OALtB,EAMCP,IAND,CAMM,MANN,EAMa,CAAChB,CAAD,EAAGhB,CAAH,KAAO;AACpB,cAAG,KAAKxB,KAAL,CAAWqB,QAAd,EAAuB;AACvB,gBAAG,KAAKrB,KAAL,CAAWqB,QAAX,CAAoB2C,QAApB,CAA6BxC,CAA7B,CAAH,EAAmC;AACnC,qBAAO,KAAP;AACC;AACA;AAEA,SAbD,EAcCgC,IAdD,CAcM,IAdN,EAcY,KAdZ,EAeCA,IAfD,CAeM,IAfN,EAeY,MAfZ,EAgBCS,EAhBD,CAgBI,OAhBJ,EAgBY,CAACzB,CAAD,EAAGhB,CAAH,KAAQ;AACpB;AACA,cAAG,KAAKxB,KAAL,CAAWmB,KAAX,IAAkB,CAArB,EAAuB;AACvB,iBAAKnB,KAAL,CAAWkE,YAAX,CAAwB,SAAO1C,CAA/B,EAAiCA,CAAjC,EAAmC,GAAnC;AACC,WAJmB,CAKpB;;AACC,SAtBD,EAuBCgC,IAvBD,CAuBM,WAvBN,EAuBmB,UAAUhB,CAAV,EAAa;AAChC,iBAAO,aAAP;AACC,SAzBD;AA0BD,OAxC8B,CAyC/B;;;AACAS,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EACCD,IADD,CACM,OADN,EACe,QADf,EAECM,IAFD,CAEMR,KAFN,EAGCI,SAHD,CAGW,MAHX,EAICO,EAJD,CAII,OAJJ,EAIY,CAACzB,CAAD,EAAGhB,CAAH,KAAO;AACnB,aAAKxB,KAAL,CAAWkE,YAAX,CAAwB,KAAKlE,KAAL,CAAWoB,SAAnC,EAA6CI,CAA7C,EAA+C,QAA/C;AACC,OAND,EAOCgC,IAPD,CAOM,aAPN,EAOqB,QAPrB,EA1C+B,CAkD/B;;AACA,UAAIW,MAAM,GAAGtE,EAAE,CAAC+C,KAAH,CAASwB,MAAT,GACZtB,MADY,CACL,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,CADK,EAEZuB,KAFY,CAEN,CAAC,SAAD,EAAW,QAAX,EAAoB,SAApB,EAA8B,KAA9B,EAAoC,SAApC,CAFM,CAAb;AAGA,UAAIC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,KAAgB,CAAjB,GAAsB,CAAjC,CAAR;AACAxB,MAAAA,GAAG,CAACQ,MAAJ,CAAW,MAAX,EACCD,IADD,CACM,GADN,EACW,CADX,EAECA,IAFD,CAEM,GAFN,EAEW,CAFX,EAGCA,IAHD,CAGM,QAHN,EAGgBpD,MAHhB,EAICoD,IAJD,CAIM,OAJN,EAIerD,KAJf,EAKC4D,KALD,CAKO,QALP,EAKgB,UAAUvB,CAAV,EAAYhB,CAAZ,EAAe;AAC/B,eAAO2C,MAAM,CAACG,CAAD,CAAb;AACC,OAPD,EAQCP,KARD,CAQO,MARP,EAQe,MARf,EASCA,KATD,CASO,cATP,EASuB,CATvB;AAUC,KA/LkB,CAgMnB;;AACC,GA9Q+B,CA+QhC;;;AACAW,EAAAA,iBAAiB,GAAG;AAClB,SAAKlE,aAAL;AACD;;AACDmE,EAAAA,kBAAkB,GAAG;AACnB,SAAKnE,aAAL;AACD;;AAEDoE,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,SAAZ,EAAsB;AACzC,QAAG,KAAK9E,KAAL,CAAWc,OAAX,IAAoB,MAAvB,EAA8B;AAC5B,aAAO,KAAP;AACD,KAFD,MAGK,IAAG,KAAKd,KAAL,CAAWgB,OAAX,KAAqB6D,SAAS,CAAC7D,OAAlC,EAA0C;AAC7C,aAAO,KAAP;AACD,KAFI,MAGA,IAAG,KAAKhB,KAAL,CAAWc,OAAX,IAAoB,OAAvB,EAA+B;AAClC,aAAO,KAAP;AACD,KAFI,MAGD;AACFiE,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,aAAO,IAAP;AACD;AACF;;AAEDC,EAAAA,MAAM,GACN;AACEF,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhF,KAAL,CAAWmB,KAAvB;AACI,WACA;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAkC,MAAA,EAAE,EAAE,KAAKnB,KAAL,CAAWc,OAAX,IAAoB,MAApB,GAA4B,MAA5B,GAAoC,QAAM,KAAKd,KAAL,CAAWmB,KAA3F;AAAkG,MAAA,GAAG,EAAEW,IAAI,IAAI,KAAKA,IAAL,GAAYA,IAA3H;AACA,MAAA,KAAK,EAAE,KAAK7B,KAAL,CAAWE,KADlB;AACyB,MAAA,MAAM,EAAE,KAAKF,KAAL,CAAWG,MAD5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA;AAKL;;AA/S+B;;AAiThC,eAAeN,OAAf","sourcesContent":["import React, { Component } from 'react'\nimport './App.css'\nimport * as d3 from 'd3'\nclass HeatMap extends Component {\n   constructor(props){\n      super(props)\n      this.state={\n        svgcount:0,\n        width:0,\n        height:0,\n        test:1, dataset_length:5,attribute_length:0,\n      }\n      this.createHeatMap = this.createHeatMap.bind(this)\n      this.prep = this.prep.bind(this)\n      this.prep2 = this.prep2.bind(this)\n   }\n   componentWillMount(){\n    var multiplier=18; // multiplier defines the cell size\n    if(this.props.display=='main'){\n      this.setState({width:this.props.commonA.length*multiplier + 420})\n      this.setState({attribute_length: this.props.commonA.length});\n      this.setState({height:this.props.datasets.datasets.length*multiplier + 120})\n      this.setState({dataset_length: this.props.datasets.datasets.length});\n    }\n    else if(this.props.count==1){\n      this.setState({width:this.props.commonA.length*multiplier + 420})\n      this.setState({attribute_length: this.props.commonA.length});\n      this.setState({height:this.props.gdatasets.length*multiplier + 120})\n      this.setState({dataset_length: this.props.gdatasets.length});\n    }\n    else if(this.props.display=='child' && this.props.count!=1){\n      this.setState({width:this.props.commonA.length*multiplier + 420})\n      this.setState({attribute_length: this.props.commonA.length});\n      this.setState({height:this.props.gdatasets.length*multiplier + 10})\n      this.setState({dataset_length: this.props.gdatasets.length});\n    }\n    else{\n      this.setState({width:this.props.clickedA.length*multiplier + 350})\n      this.setState({height:this.props.gdatasets.length*multiplier + 120})\n      this.setState({dataset_length: this.props.gdatasets.length});\n      this.setState({attribute_length: this.props.clickedA.length-1});\n    }\n  \n  }\n  //--------------------------------Prepare for HeatMap here\n   prep(mydata,commonA){\n    var arr=[]\n    for (var i=0;i<mydata.datasets.length;i++){\n        for(var j=0;j<commonA.length;j++){\n            var arr2=[];\n            arr2.push(mydata.datasets[i]);\n            arr2.push(commonA[j])\n            arr2.push(mydata.matrix[i][j]);\n            //console.log(mydata.datasets[i],mydata.matrix[i][j],commonA[j]);\n            arr.push(arr2);\n        }\n        \n    }\n    return arr;\n}\nprep2(mydata,commonA,gdatasets){\n  var arr=[]\n  for (var i=0;i<mydata.datasets.length;i++){\n      for(var ai=0;ai<gdatasets.length;ai++){\n          if(mydata.datasets[i]==gdatasets[ai]){\n              for(var j=0;j<commonA.length;j++){\n                  var arr2=[];\n                  arr2.push(mydata.datasets[i]);\n                  arr2.push(commonA[j])\n                  arr2.push(mydata.matrix[i][j]);\n                  //console.log(mydata.datasets[i],mydata.matrix[i][j],commonA[j]);\n                  arr.push(arr2);\n              }\n          }    \n      }\n  }\n  //console.log('prep2',arr)\n  return arr;\n}\n   //------------CreateHeatMap starts here\n   createHeatMap() {\n    const node = this.node\n    if(this.props.display=='main' || this.props.count==1){\n      var margin = {top: 100, right: 40, bottom: 20, left: 480};\n    }\n    else{\n      var margin = {top: 5, right: 40, bottom: 5, left: 480};\n    }\n    var width = this.state.width - margin.right - margin.left,\n    height = this.state.height - margin.top - margin.bottom;\n    if(this.props.display=='main'){\n      var data=this.prep(this.props.datasets,this.props.commonA)\n    }\n    //-------only combinationed attributes\n    else if(this.props.display=='minimum'){\n      var data=this.prep2(this.props.datasets,this.props.clickedA,this.props.gdatasets)\n    }\n    else{\n      var data=this.prep2(this.props.datasets,this.props.commonA,this.props.gdatasets)\n    }\n    //console.log(data);\n    var x_elements = d3.set(data.map(function( d ) { return d[1]; } )).values();\n    //console.log(x_elements);\n    var y_elements = d3.set(data.map(function( d ) { return d[0]; } )).values();\n    \n// Ordinal Scaling for X axis\n    var xScale = d3.scale.ordinal()\n      .domain(x_elements)\n      .rangeBands([0, width]);\n    var xAxis = d3.svg.axis()\n      .scale(xScale)\n      .tickFormat(function (d) {\n          return d;\n      })\n      .orient(\"top\");\n     // console.log(width)\n//Ordinal Scaling for Y axis\n    var yScale = d3.scale.ordinal()\n      .domain(y_elements)\n      .rangeBands([0, height]);\n    var yAxis = d3.svg.axis()\n      .scale(yScale)\n      .tickFormat(function (d) {\n          return d;\n      })\n      .orient(\"left\");\n//--------- d3 Select starts here\n    var svg = d3.select(node)\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n      svg.selectAll('rect')\n      .data(data)\n      .enter().append('rect')\n      d3.select(node)\n      .selectAll('rect')\n      .data(data)\n      .exit()\n      .remove()\n//-------------------------------------------------------------------------------------- Main view starts here\nif(this.props.display=='main'){\n          d3.select(node)\n          .selectAll('rect')\n          .data(data)\n          .attr('class', 'cell')\n          .attr('id',(d,i)=>\"cell\"+i)\n          .attr('width', width/(this.state.attribute_length)-1)\n          .attr('height', height/(this.state.dataset_length)-1)\n          .attr('y', function(d) { return yScale(d[0]); })\n          .attr('x', function(d) { return xScale(d[1]); })\n          .attr('fill', (d)=> d[2]!=='n'? 'rgb(158,154,200)':\"rgb(247,247, 247)\")\n//--x axis\nsvg.append(\"g\")\n.attr(\"class\", \"x axis\")\n.call(xAxis)\n.selectAll('text')\n.attr(\"id\",(d,i)=> 'text'+i)\n.style(\"text-anchor\", \"start\")\n.attr('fill',(d,i)=>{\n  if(this.props.clickedA){\n    if(this.props.clickedA.includes(i)){\n      return('red');\n    }\n  }\n  \n})\n.attr(\"dx\", \"1em\")\n.attr(\"dy\", \".6em\")\n.on('click',(d,i)=> {\n  // assign function only for main matrix\n  if(this.props.display=='main'){\n    this.props.clickhandler('text'+i,i,'x');\n  }\n  // else can be applied for\n})\n.attr(\"transform\", function (d) {\n    return \"rotate(-45)\";    \n});      \n//------------------------------------------------------- Y Axis\nsvg.append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .call(yAxis)\n      .selectAll('text')\n      .on('click',(d,i)=>{\n        this.props.clickhandler(this.props.gdatasets,i,'popup2');\n      })\n      .attr('font-weight', 'normal');\n//------------------------------------------------------- Border starts here\nvar colors = d3.scale.linear()\n.domain([0,1,2,3,4])\n.range([\"#9321ff\",\"yellow\",\"#93215f\",\"red\",\"#31c514\"]);\nvar x = Math.floor((Math.random() * 4) + 1);\nsvg.append(\"rect\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .style(\"stroke\",function (d,i) {\n        return colors(x);    \n    })\n      .style(\"fill\", \"none\")\n      .style(\"stroke-width\", 3);\n}\n//Main view ends here\n//-------------------------------------------------------------------------------------- childview starts here\nif(this.props.display=='child'){\n  d3.select(\"#svg0\").remove();\n  d3.select(node)\n  .selectAll('rect')\n  .data(data)\n  .attr('class', 'cell')\n  .attr('id',(d,i)=>\"cell\"+i)\n  .attr('width', width/(this.state.attribute_length)-1)\n  .attr('height', height/(this.state.dataset_length)-1)\n  .attr('y', function(d) { return yScale(d[0]); })\n  .attr('x', function(d) { return xScale(d[1]); })\n  .attr('fill', (d)=> d[2]!=='n'? 'rgb(158,154,200)':\"rgb(247,247, 247)\")\n//--x axis\nif(this.props.count==1){\n  svg.append(\"g\")\n  .attr(\"class\", \"x axis\")\n  .call(xAxis)\n  .selectAll('text')\n  .attr(\"id\",(d,i)=> 'text'+i)\n  .style(\"text-anchor\", \"start\")\n  .attr('fill',(d,i)=>{\n  if(this.props.clickedA){\n  if(this.props.clickedA.includes(i)){\n  return('red');\n  }\n  }\n  \n  })\n  .attr(\"dx\", \"1em\")\n  .attr(\"dy\", \".6em\")\n  .on('click',(d,i)=> {\n  // assign function only for main matrix\n  if(this.props.count==1){\n  this.props.clickhandler('text'+i,i,'x');\n  }\n  // else can be applied for\n  })\n  .attr(\"transform\", function (d) {\n  return \"rotate(-45)\";    \n  });\n}      \n//----------Y Axis\nsvg.append(\"g\")\n.attr(\"class\", \"y axis\")\n.call(yAxis)\n.selectAll('text')\n.on('click',(d,i)=>{\nthis.props.clickhandler(this.props.gdatasets,i,'popup2');\n})\n.attr('font-weight', 'normal');\n//------Border starts here\nvar colors = d3.scale.linear()\n.domain([0,1,2,3,4])\n.range([\"#9321ff\",\"yellow\",\"#93215f\",\"red\",\"#31c514\"]);\nvar x = Math.floor((Math.random() * 4) + 1);\nsvg.append(\"rect\")\n.attr(\"x\", 0)\n.attr(\"y\", 0)\n.attr(\"height\", height)\n.attr(\"width\", width)\n.style(\"stroke\",function (d,i) {\nreturn colors(x);    \n})\n.style(\"fill\", \"none\")\n.style(\"stroke-width\", 3);\n}\n//Child view ends here\n}\n//CreateMap ends here\ncomponentDidMount() {\n  this.createHeatMap()\n}\ncomponentDidUpdate() {\n  this.createHeatMap()\n}\n\nshouldComponentUpdate(nextProps, nextState){\n  if(this.props.display=='main'){\n    return false;\n  }\n  else if(this.props.commonA===nextProps.commonA){\n    return false;\n  }\n  else if(this.props.display==\"child\"){\n    return false;\n  }\n  else{\n    console.log(' else ');\n    return true;\n  }\n}\n\nrender() \n{\n  console.log(this.props.count)\n      return(\n      <svg className=\"svgRectContainer\" id={this.props.display==\"main\"? \"svg0\" :\"svg\"+this.props.count} ref={node => this.node = node}\n      width={this.state.width} height={this.state.height}>\n      </svg> \n    )\n}\n}\nexport default HeatMap"]},"metadata":{},"sourceType":"module"}