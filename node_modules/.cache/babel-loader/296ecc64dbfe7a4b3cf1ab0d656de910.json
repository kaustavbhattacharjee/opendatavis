{"ast":null,"code":"var _jsxFileName = \"/Users/mr.mamun/Desktop/Programs/18 ReactApps/reorderablemat3/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport HeatMap from './HeatMap';\nimport Popup from './Popup';\nimport * as algorithms from './algorithms'; //import * as d3 from 'd3'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.index2atrr = indexArray => {\n      var result = [];\n\n      for (var i = 0; i < indexArray.length; i++) {\n        console.log(indexArray[i]);\n\n        if (typeof this.state.unionmade[indexArray[i]] != \"undefined\") {\n          //console.log(this.state.unionmade[indexArray[i]])\n          result.push(this.state.unionmade[indexArray[i]]);\n        }\n      } //console.log(algorithms.matrixgen(result,this.state.mydata2))\n\n\n      return result;\n    };\n\n    this.classAdder = (id, class_name) => {\n      var element = document.getElementById(id);\n      element.style.fill = 'blue';\n      element.classList.add(class_name);\n    };\n\n    this.classRemover = (id, class_name) => {\n      var element = document.getElementById(id);\n      element.classList.remove(class_name);\n    };\n\n    this.state = {\n      mydata1: {\n        '2005-2010_Graduation_Outcomes_-_School_Level.csv': ['Student Age', 'DBN', 'CORE COURSE (MS CORE and 9-12 ONLY)', 'SERVICE CATEGORY(K-9* ONLY)', 'NUMBER OF STUDENTS / SEATS FILLED', 'NUMBER OF SECTIONS', 'AVERAGE CLASS SIZE', 'SIZE OF SMALLEST CLASS', 'SIZE OF LARGEST CLASS', 'DATA SOURCE', 'Demographic', 'Cohort', 'Still Enrolled - % of cohort', 'Dropped Out - n', 'Dropped Out - % of cohort'],\n        '2006-2007_School_Progress_Report.csv': ['DBN', 'DISTRICT', 'PERCENT OF STUDENTS IN BOROUGH / GRADE / PROGRAM / SUBJECT'],\n        '2010-2011_Class_Size_-_School-level_detail.csv': ['CSD', 'SCHOOLWIDE PUPIL-TEACHER RATIO'],\n        '2011_-_2016_Demographic_Snapshot.csv': ['DBN', 'Student Age', 'Year', 'Total Enrollment', 'Grade PK', 'Grade K', 'Grade', 'Present', 'Released'],\n        'Local_Law_14_Health_Data_-_HS_School.csv': ['School DBN', 'Community School District', 'City Council District', 'Student Age', 'SCHOOL CODE', 'NUMBER OF SECTIONS', 'AVERAGE CLASS SIZE', 'SIZE OF SMALLEST CLASS', 'SIZE OF LARGEST CLASS', 'DATA SOURCE', 'GRADE ', 'PROGRAM TYPE', 'CORE SUBJECT (MS CORE and 9-12 ONLY)', 'CORE COURSE (MS CORE and 9-12 ONLY)', 'SERVICE CATEGORY(K-9* ONLY)', 'NUMBER OF STUDENTS / SEATS FILLED', 'NUMBER OF SECTIONS', '# of 15-16 June and August graduates', '# of 15-16 June and August graduates meeting high school health requirements', '%2']\n      },\n      unionmade: [],\n      arr: [],\n      clickedA: [],\n      groups: [],\n      matrixdata: {},\n      mydata2: {\n        'Health_Education_K-12_-_Health_Instructors.csv': ['School Name', 'School DBN', 'Community School District', 'City Council District', 'DBN', 'Grade Level', 'Program Type', 'Department', 'Number of Students', 'Number of Classes', '# of students in grades 9-12', 'School Year', '# of teachers assigned to teach health'],\n        '2015_-_2016_Career_Technical_Education_Report.csv': ['School DBN', 'School Name', 'Is CTE-designated High School', 'CTE Program Name', 'CTE Program Industry Cluster', 'Number of Industry Partners', 'NYSED Approval Status', 'Enrolled Student Grades', 'CTE enrolled Student Count'],\n        'Final_Class_Size_Report_Middle___High_School.csv': ['School Name', 'Subject', 'Average Class Size'],\n        '2016_-_2017_Health_Education_Report.csv': ['School DBN', 'Community School District', 'City Council District', 'School Name', '# of students in grades 9-12 scheduled for at least one semester of health instruction', '# of 16-17 June and August graduates', '# of 16-17 June and August graduates meeting high school health requirements'],\n        '2017-2018_Monthly_Attendance.csv': ['School', 'Month Code', 'CalMonth', 'GradeLevel', 'GradeSort', 'Roster Count', 'Absent', 'Present', 'Released'],\n        'Class_Size_Report_Borough_Middle_And_High_School.csv': ['Borough', 'Grade Level', 'Program Type', 'Department', 'Class Size', 'Number of Students', 'Number of Classes', '% of Students within Grade'],\n        'ES_Zones_2016-2017.csv': ['INITIALS', 'BORO', 'the_geom', 'SCHOOLDIST', 'CREAT_DATE', 'EDIT_DATE', 'BORO_NUM', 'Shape_Leng', 'Shape_Area', 'REMARKS', 'DBN', 'ESID_NO', 'Label', 'ZONED_DIST'],\n        'Local_Law_14_Health_Data_-_HS_School.csv': ['School DBN', 'Community School District', 'City Council District', 'School Name', '# of students in grades 9-12', '# of students in grades 9-12 who have completed at least one semester of health instruction  ', '%', '# of 15-16 June and August graduates', '# of 15-16 June and August graduates meeting high school health requirements', '%2']\n      }\n    };\n    this.clickhandle = this.clickhandle.bind(this);\n    this.view_group = this.view_group.bind(this);\n    this.view_group2 = this.view_group2.bind(this);\n    this.Unionmaker = this.Unionmaker.bind(this);\n    this.attribute_click_handler = this.attribute_click_handler.bind(this);\n    this.togglePopup = this.togglePopup.bind(this);\n  }\n\n  //----------------------------------------------------Union Maker\n  Unionmaker(mydata) {\n    var mySet = new Set();\n\n    for (var key in mydata) {\n      for (var i = 0; i < mydata[key].length; i++) {\n        mySet.add(mydata[key][i]);\n      }\n    }\n\n    return Array.from(mySet);\n  } //-----------------------------------------------------clickhandle starts here\n\n\n  clickhandle(ab) {\n    console.log(ab);\n    var arr = [];\n    var clickedAA = [...this.state.clickedA, ab];\n    this.setState({\n      clickedA: clickedAA\n    }); //console.log(this.state.clickedA)\n\n    for (var i = 0; i < 1; i++) {\n      var a = React.createElement(HeatMap, {\n        key: i,\n        gdatasets: [],\n        display: \"main\",\n        clickhandler: this.attribute_click_handler,\n        datasets: this.state.matrixdata,\n        commonA: this.state.unionmade,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      });\n      arr.push(a);\n    }\n\n    this.setState({\n      arr: arr\n    }); //console.log(this.state.matrixdata);\n  } //-----------------------------------------------------ViewGroup click handler starts here\n\n\n  view_group() {\n    var mySet = new Set();\n\n    for (var i = 1; i < this.state.clickedA.length; i++) {\n      mySet.add(this.state.clickedA[i]);\n    }\n\n    var index = Array.from(mySet);\n    var combinations = algorithms.combinationgen(index);\n    var combinationmatched = algorithms.combination_matched(this.state.matrixdata.matrix, this.state.matrixdata.datasets, combinations);\n    var groups = algorithms.grouping_based_on_combination(combinations, combinationmatched);\n    var groups_to_vis = [];\n\n    for (var j = 0; j < groups.length; j++) {\n      console.log('combinations : ', combinations, 'j is: ', j, combinations[j]);\n      var a = React.createElement(HeatMap, {\n        key: j,\n        combinations: combinations,\n        gdatasets: groups[j].dataset,\n        display: \"child\",\n        mypopup: this.togglePopup,\n        clickedA: this.state.clickedA,\n        clickhandler: this.attribute_click_handler,\n        datasets: this.state.matrixdata,\n        commonA: this.state.unionmade,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      });\n      groups_to_vis.push(a);\n    }\n\n    this.setState({\n      groups: groups_to_vis\n    });\n    console.log(groups_to_vis);\n  } //-----------------------------------------------------ViewGroup2 click handler starts here\n\n\n  view_group2() {\n    var clickedAttr = this.index2atrr(this.state.clickedA);\n    var matrixdata = algorithms.matrixgen(clickedAttr, this.state.mydata2);\n    console.log(\"view group 2\", clickedAttr);\n    var mySet = new Set();\n\n    for (var i = 1; i < this.state.clickedA.length; i++) {\n      mySet.add(this.state.clickedA[i]);\n    }\n\n    var index = Array.from(mySet);\n    var combinations = algorithms.combinationgen(index);\n    var combinationmatched = algorithms.combination_matched(this.state.matrixdata.matrix, this.state.matrixdata.datasets, combinations);\n    var groups = algorithms.grouping_based_on_combination(combinations, combinationmatched);\n    var groups_to_vis = [];\n\n    for (var j = 0; j < groups.length; j++) {\n      var a = React.createElement(HeatMap, {\n        key: j,\n        combinations: combinations,\n        gdatasets: groups[j].dataset,\n        display: \"child\",\n        clickedA: clickedAttr,\n        clickhandler: this.attribute_click_handler,\n        mypopup: this.togglePopup,\n        datasets: matrixdata,\n        commonA: clickedAttr,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      });\n      groups_to_vis.push(a);\n    }\n\n    this.setState({\n      groups: groups_to_vis\n    });\n  } //-----------------------------------------------------IndextoAttribute Generator function\n\n\n  //-----------------------------------------------------attribute_click_handler starts here\n  attribute_click_handler(id, index, axis) {\n    if (axis == 'y') {\n      console.log(id);\n      this.togglePopup();\n    } else {\n      this.classAdder(id, 'textcolor');\n      var arr = this.state.clickedA;\n      arr.push(index);\n      this.setState({\n        clickedA: arr\n      }, () => {//console.log(\"clicked index : \",ab,\" Array from state : \",this.state.clickedA)\n      });\n    }\n  } //----------------------------------------------------- Class Adder\n\n\n  //-----------------------------------------------------ComponentDidmount\n  componentDidMount() {\n    var unionedA = this.Unionmaker(this.state.mydata2);\n    this.setState({\n      unionmade: unionedA\n    }); //console.log(unionedA)\n\n    var matrixdata = algorithms.matrixgen(unionedA, this.state.mydata2);\n    this.setState({\n      matrixdata: matrixdata\n    });\n  }\n\n  componentDidUpdate(prevState, prevProp) {\n    return false;\n  }\n  /*\n  shouldComponentUpdate(nextProps, nextState){\n    if(count>3){\n      console.log(nextState);\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n  */\n  //----------------------------------------------------- togglePopup\n\n\n  togglePopup() {\n    this.setState({\n      showPopup: !this.state.showPopup\n    });\n  }\n\n  render() {\n    console.log('Main render');\n    console.log(this.state.arr);\n\n    if (this.state.arr > 0) {\n      console.log(this.state.arr);\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.clickhandle,\n      className: \"btn btn-primary btn-sm mybutton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \" Matrix \"), React.createElement(\"button\", {\n      onClick: this.view_group,\n      className: \"btn btn-primary btn-sm mybutton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \" View Groups\"), React.createElement(\"button\", {\n      onClick: this.view_group2,\n      className: \"btn btn-primary btn-sm mybutton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \" View Groups 2\"), this.state.showPopup ? React.createElement(Popup, {\n      text: \"Close Me\",\n      closePopup: this.togglePopup.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }) : null), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, Object.keys(this.state.matrixdata).length > 0 ? React.createElement(HeatMap, {\n      key: 'key1',\n      gdatasets: [],\n      display: \"main\",\n      clickhandler: this.attribute_click_handler,\n      datasets: this.state.matrixdata,\n      commonA: this.state.unionmade,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }) : \"NA\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, this.state.arr), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, this.state.groups));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mr.mamun/Desktop/Programs/18 ReactApps/reorderablemat3/src/App.js"],"names":["React","Component","HeatMap","Popup","algorithms","App","constructor","props","index2atrr","indexArray","result","i","length","console","log","state","unionmade","push","classAdder","id","class_name","element","document","getElementById","style","fill","classList","add","classRemover","remove","mydata1","arr","clickedA","groups","matrixdata","mydata2","clickhandle","bind","view_group","view_group2","Unionmaker","attribute_click_handler","togglePopup","mydata","mySet","Set","key","Array","from","ab","clickedAA","setState","a","index","combinations","combinationgen","combinationmatched","combination_matched","matrix","datasets","grouping_based_on_combination","groups_to_vis","j","dataset","clickedAttr","matrixgen","axis","componentDidMount","unionedA","componentDidUpdate","prevState","prevProp","showPopup","render","Object","keys"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport HeatMap from './HeatMap';\nimport Popup from './Popup';\nimport * as algorithms from './algorithms';\n//import * as d3 from 'd3'\nclass App extends Component {\n  constructor(props) {\n  super(props);\n  this.state = {\n  mydata1:{\n    '2005-2010_Graduation_Outcomes_-_School_Level.csv': \n    ['Student Age',\n    'DBN',\n    'CORE COURSE (MS CORE and 9-12 ONLY)',\n'SERVICE CATEGORY(K-9* ONLY)',\n'NUMBER OF STUDENTS / SEATS FILLED',\n'NUMBER OF SECTIONS',\n'AVERAGE CLASS SIZE',\n'SIZE OF SMALLEST CLASS',\n'SIZE OF LARGEST CLASS',\n'DATA SOURCE',\n'Demographic',\n'Cohort',\n'Still Enrolled - % of cohort',\n'Dropped Out - n',\n'Dropped Out - % of cohort'],\n'2006-2007_School_Progress_Report.csv': ['DBN',\n'DISTRICT',\n'PERCENT OF STUDENTS IN BOROUGH / GRADE / PROGRAM / SUBJECT'],\n'2010-2011_Class_Size_-_School-level_detail.csv': ['CSD',\n'SCHOOLWIDE PUPIL-TEACHER RATIO'],\n'2011_-_2016_Demographic_Snapshot.csv': ['DBN',\n'Student Age',\n'Year',\n'Total Enrollment',\n'Grade PK',\n'Grade K',\n'Grade',\n'Present',\n'Released'],\n'Local_Law_14_Health_Data_-_HS_School.csv': ['School DBN',\n'Community School District',\n'City Council District',\n'Student Age',\n'SCHOOL CODE',\n'NUMBER OF SECTIONS',\n'AVERAGE CLASS SIZE',\n'SIZE OF SMALLEST CLASS',\n'SIZE OF LARGEST CLASS',\n'DATA SOURCE',\n'GRADE ',\n'PROGRAM TYPE',\n'CORE SUBJECT (MS CORE and 9-12 ONLY)',\n'CORE COURSE (MS CORE and 9-12 ONLY)',\n'SERVICE CATEGORY(K-9* ONLY)',\n'NUMBER OF STUDENTS / SEATS FILLED',\n'NUMBER OF SECTIONS','# of 15-16 June and August graduates',\n'# of 15-16 June and August graduates meeting high school health requirements',\n'%2']},\n      unionmade:[],\n      arr:[],\n      clickedA:[],\n      groups:[],\n    matrixdata:{},\nmydata2: {'Health_Education_K-12_-_Health_Instructors.csv': [\n      'School Name',\n      'School DBN',\n      'Community School District',\n      'City Council District',\n      'DBN',\n      'Grade Level',\n      'Program Type',\n      'Department',\n      'Number of Students',\n      'Number of Classes',\n      '# of students in grades 9-12',\n      'School Year',\n      '# of teachers assigned to teach health'],\n     '2015_-_2016_Career_Technical_Education_Report.csv': ['School DBN',\n      'School Name',\n      'Is CTE-designated High School',\n      'CTE Program Name',\n      'CTE Program Industry Cluster',\n      'Number of Industry Partners',\n      'NYSED Approval Status',\n      'Enrolled Student Grades',\n      'CTE enrolled Student Count'],\n     'Final_Class_Size_Report_Middle___High_School.csv': [\n      'School Name',\n      'Subject',\n      'Average Class Size'],\n     '2016_-_2017_Health_Education_Report.csv': ['School DBN',\n      'Community School District',\n      'City Council District',\n      'School Name',\n      '# of students in grades 9-12 scheduled for at least one semester of health instruction',\n      '# of 16-17 June and August graduates',\n      '# of 16-17 June and August graduates meeting high school health requirements'],\n     '2017-2018_Monthly_Attendance.csv': ['School',\n      'Month Code',\n      'CalMonth',\n      'GradeLevel',\n      'GradeSort',\n      'Roster Count',\n      'Absent',\n      'Present',\n      'Released'],\n     'Class_Size_Report_Borough_Middle_And_High_School.csv': ['Borough',\n      'Grade Level',\n      'Program Type',\n      'Department',\n      'Class Size',\n      'Number of Students',\n      'Number of Classes',\n      '% of Students within Grade'],\n     'ES_Zones_2016-2017.csv': ['INITIALS',\n      'BORO',\n      'the_geom',\n      'SCHOOLDIST',\n      'CREAT_DATE',\n      'EDIT_DATE',\n      'BORO_NUM',\n      'Shape_Leng',\n      'Shape_Area',\n      'REMARKS',\n      'DBN',\n      'ESID_NO',\n      'Label',\n      'ZONED_DIST'],\n     'Local_Law_14_Health_Data_-_HS_School.csv': ['School DBN',\n      'Community School District',\n      'City Council District',\n      'School Name',\n      '# of students in grades 9-12',\n      '# of students in grades 9-12 who have completed at least one semester of health instruction  ',\n      '%',\n      '# of 15-16 June and August graduates',\n      '# of 15-16 June and August graduates meeting high school health requirements',\n      '%2']}\n  }\n this.clickhandle=this.clickhandle.bind(this);\n this.view_group=this.view_group.bind(this);\n this.view_group2=this.view_group2.bind(this);\n this.Unionmaker=this.Unionmaker.bind(this);\n this.attribute_click_handler=this.attribute_click_handler.bind(this);\n this.togglePopup=this.togglePopup.bind(this);\n};\n//----------------------------------------------------Union Maker\nUnionmaker(mydata){\n  var mySet= new Set();\n  for(var key in mydata){\n      for(var i=0;i<mydata[key].length;i++){\n          mySet.add(mydata[key][i]);\n      }\n      }\nreturn Array.from(mySet);\n}\n//-----------------------------------------------------clickhandle starts here\nclickhandle(ab){\nconsole.log(ab);\nvar arr=[];\nvar clickedAA=[...this.state.clickedA,ab];\nthis.setState({clickedA:clickedAA});\n//console.log(this.state.clickedA)\nfor(var i=0;i<1;i++){\n  var a = <HeatMap key={i} gdatasets={[]} display='main' clickhandler={this.attribute_click_handler} datasets={this.state.matrixdata} commonA={this.state.unionmade} />\n  arr.push(a)  \n}\nthis.setState({arr:arr});\n//console.log(this.state.matrixdata);\n}\n//-----------------------------------------------------ViewGroup click handler starts here\nview_group(){\n  var mySet=new Set();\n  for(var i=1;i<this.state.clickedA.length;i++){\n    mySet.add(this.state.clickedA[i])\n  }\n  var index=Array.from(mySet);\n  var combinations=algorithms.combinationgen(index);\n  var combinationmatched=algorithms.combination_matched(this.state.matrixdata.matrix,this.state.matrixdata.datasets,combinations)\n  var groups=algorithms.grouping_based_on_combination(combinations,combinationmatched);\n  var groups_to_vis=[];\n  for(var j=0;j<groups.length;j++){\n    console.log('combinations : ',combinations ,'j is: ',j,combinations[j]);\n    var a=<HeatMap key={j} combinations={combinations} gdatasets={groups[j].dataset} display='child' mypopup={this.togglePopup} clickedA={this.state.clickedA} clickhandler={this.attribute_click_handler} datasets={this.state.matrixdata} commonA={this.state.unionmade}  />\n    groups_to_vis.push(a);\n  }\n  this.setState({groups:groups_to_vis});\n  console.log(groups_to_vis)\n}\n//-----------------------------------------------------ViewGroup2 click handler starts here\nview_group2(){\n  var clickedAttr=this.index2atrr(this.state.clickedA);\n  var matrixdata = algorithms.matrixgen(clickedAttr,this.state.mydata2)\n  console.log(\"view group 2\",clickedAttr);\n  var mySet=new Set();\n  for(var i=1;i<this.state.clickedA.length;i++){\n    mySet.add(this.state.clickedA[i])\n  }\n  var index=Array.from(mySet);\n  var combinations=algorithms.combinationgen(index);\n  var combinationmatched=algorithms.combination_matched(this.state.matrixdata.matrix,this.state.matrixdata.datasets,combinations)\n  var groups=algorithms.grouping_based_on_combination(combinations,combinationmatched);\n  var groups_to_vis=[];\n  for(var j=0;j<groups.length;j++){\n    var a=<HeatMap key={j} combinations={combinations} gdatasets={groups[j].dataset} display='child' clickedA={clickedAttr} clickhandler={this.attribute_click_handler} mypopup={this.togglePopup} datasets={matrixdata} commonA={clickedAttr}  />\n    groups_to_vis.push(a);\n  }\n  this.setState({groups:groups_to_vis});\n}\n//-----------------------------------------------------IndextoAttribute Generator function\nindex2atrr=(indexArray)=>{\n  var result=[];\n  for(var i=0;i<indexArray.length;i++){\n    console.log(indexArray[i]);\n    if(typeof(this.state.unionmade[indexArray[i]])!= \"undefined\"){\n      //console.log(this.state.unionmade[indexArray[i]])\n      result.push(this.state.unionmade[indexArray[i]]);\n    }\n  }\n//console.log(algorithms.matrixgen(result,this.state.mydata2))\nreturn result;\n}\n//-----------------------------------------------------attribute_click_handler starts here\nattribute_click_handler(id,index,axis){\nif(axis=='y'){\n  console.log(id)\n  this.togglePopup();\n}\nelse{\n  this.classAdder(id,'textcolor')\n  var arr=this.state.clickedA;\n  arr.push(index)\n  this.setState({clickedA:arr},()=>{\n    //console.log(\"clicked index : \",ab,\" Array from state : \",this.state.clickedA)\n  })\n}\n  }\n//----------------------------------------------------- Class Adder\nclassAdder = (id,class_name)=>{\nvar element = document.getElementById(id);\nelement.style.fill = 'blue';\nelement.classList.add(class_name);\n}\n//----------------------------------------------------- Class Remover\nclassRemover = (id,class_name)=>{\n  var element = document.getElementById(id);\n  element.classList.remove(class_name);\n  }  \n//-----------------------------------------------------ComponentDidmount\ncomponentDidMount(){\n  var unionedA=this.Unionmaker(this.state.mydata2);\n  this.setState({unionmade:unionedA})\n  //console.log(unionedA)\n  var matrixdata=algorithms.matrixgen(unionedA,this.state.mydata2);\n  this.setState({matrixdata:matrixdata})\n}\ncomponentDidUpdate(prevState,prevProp){\n  return false;\n}\n/*\nshouldComponentUpdate(nextProps, nextState){\n  if(count>3){\n    console.log(nextState);\n    return false;\n  }\n  else{\n    return true;\n  }\n}\n*/\n//----------------------------------------------------- togglePopup\ntogglePopup(){\n  this.setState({\n    showPopup: !this.state.showPopup\n  });\n}\nrender() {\n  console.log('Main render')\n  console.log(this.state.arr);\n  if(this.state.arr>0){\n    console.log(this.state.arr);\n  }\n    return (\n     <div>\n      <div>\n      <button onClick={this.clickhandle} className=\"btn btn-primary btn-sm mybutton\"> Matrix </button>\n      <button onClick={this.view_group} className=\"btn btn-primary btn-sm mybutton\"> View Groups</button>\n      <button onClick={this.view_group2} className=\"btn btn-primary btn-sm mybutton\"> View Groups 2</button>\n      {this.state.showPopup ? \n          <Popup\n            text='Close Me'\n            closePopup={this.togglePopup.bind(this)}\n          />\n          : null\n      }\n      </div>\n      <div>\n        {\n          (Object.keys(this.state.matrixdata).length>0)?<HeatMap key={'key1'} gdatasets={[]} display='main' clickhandler={this.attribute_click_handler} datasets={this.state.matrixdata} commonA={this.state.unionmade} />:\"NA\"\n        }\n      </div>\n      <div>{this.state.arr}</div>\n      <div>\n        {this.state.groups}\n      </div>\n    </div>\n    );\n  }\n}\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}